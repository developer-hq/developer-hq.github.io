<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="https://developer-hq.github.io/page/3/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://developer-hq.github.io/page/3/"/>





  <title>Hexo</title>
  








<meta name="generator" content="Hexo 6.3.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Hexo</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://developer-hq.github.io/2023/06/06/%E7%A7%BB%E5%8A%A8%E7%AB%AFvpn%E9%85%8D%E7%BD%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2023/06/06/%E7%A7%BB%E5%8A%A8%E7%AB%AFvpn%E9%85%8D%E7%BD%AE/" itemprop="url">移动端vpn配置</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2023-06-06T22:58:52+08:00">
                2023-06-06
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="移动端vpn配置"><a href="#移动端vpn配置" class="headerlink" title="移动端vpn配置"></a>移动端vpn配置</h1><p>解决疑似cdn节点问题导致的b站、微信、知乎卡顿</p>
<p>==<strong>使用shadowrock</strong>==</p>
<p><a target="_blank" rel="noopener" href="https://johnshall.github.io/Shadowrocket-ADBlock-Rules-Forever/#">https://johnshall.github.io/Shadowrocket-ADBlock-Rules-Forever/#</a></p>
<h2 id="规则使用方法"><a href="#规则使用方法" class="headerlink" title="规则使用方法"></a>规则使用方法</h2><p>方法一：用 Safari 或 ShadowRocket 扫描二维码即可。<br> 方法二：在 ShadowRocket 应用中，进入 [配置] 页面，点击右上角加号，将规则文件地址粘贴到 url 处，点击“下载”即可。</p>
<p>最好让 ShadowRocket 断开并重新连接一次，以确保新的规则文件生效。</p>
<h2 id="如何自动更新"><a href="#如何自动更新" class="headerlink" title="如何自动更新"></a>如何自动更新</h2><p>步骤一：安装<a target="_blank" rel="noopener" href="https://www.icloud.com/shortcuts/20bd590bc99e4ef0a157d2fe6e8c273d">捷径</a>，并填写规则文件地址；<br> 步骤二：打开“快捷指令”下方的“自动化”，轻击右上角加号，点击“创建个人自动化”，选择“特定时间”，设定时间为 8:05  或更晚的时间（规则生成需要一定时间），点击下一步，点击添加操作，选择 APP  栏，找到快捷指令，选择“运行快捷指令”，点击浅色“快捷指令”，选择“Shadowrocket  规则自动更新”，点击下一步，关闭运行前询问（可选），点击完成即可。</p>
<p>如果出现无法正常跳转 Safari 对 google.cn 的请求的情况，请在每次更新后点击规则后方的ℹ️，点击 HTTPS 解密，将 HTTPS 解密关闭，返回，再开启，即可正常跳转。</p>
<p><strong>==使用黑名单模式==</strong></p>
<h2 id="黑名单过滤-广告"><a href="#黑名单过滤-广告" class="headerlink" title="黑名单过滤 + 广告"></a>黑名单过滤 + 广告</h2><p>黑名单中包含了境外网站中无法访问的那些，对不确定的网站则默认直连。</p>
<ul>
<li>代理：被墙的网站（GFWList）</li>
<li>直连：正常的网站</li>
<li>包含广告过滤</li>
</ul>
<p>规则地址：<a target="_blank" rel="noopener" href="https://johnshall.github.io/Shadowrocket-ADBlock-Rules-Forever/sr_top500_banlist_ad.conf">https://johnshall.github.io/Shadowrocket-ADBlock-Rules-Forever/sr_top500_banlist_ad.conf</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://developer-hq.github.io/2023/06/04/%E5%AD%A6%E4%B9%A0%E7%8E%87%E8%A1%B0%E5%87%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2023/06/04/%E5%AD%A6%E4%B9%A0%E7%8E%87%E8%A1%B0%E5%87%8F/" itemprop="url">学习率衰减</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2023-06-04T11:45:20+08:00">
                2023-06-04
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="学习率衰减"><a href="#学习率衰减" class="headerlink" title="学习率衰减"></a>学习率衰减</h1><p>学习率衰减是在训练过程中逐渐减小学习率的一种常用策略，它有助于模型在训练后期更加精细地调整参数。下面是几种常见的学习率衰减方法及其在PyTorch中的实现方式：</p>
<ol>
<li>学习率衰减的步进调整：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">python</span><br><span class="line">import torch.optim as optim</span><br><span class="line"></span><br><span class="line">optimizer = optim.SGD(model.parameters(), lr=0.1)  # 定义优化器，初始学习率为0.1</span><br><span class="line">scheduler = optim.lr_scheduler.StepLR(optimizer, step_size=5, gamma=0.1)  # 学习率每隔step_size个epoch衰减为原来的gamma倍</span><br><span class="line"></span><br><span class="line"># 在训练循环中的每个epoch后调用</span><br><span class="line">scheduler.step()  # 更新学习率</span><br></pre></td></tr></table></figure>

<ol>
<li>学习率衰减的余弦退火：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">python</span><br><span class="line">import torch.optim as optim</span><br><span class="line">import math</span><br><span class="line"></span><br><span class="line">optimizer = optim.SGD(model.parameters(), lr=0.1)  # 定义优化器，初始学习率为0.1</span><br><span class="line">scheduler = optim.lr_scheduler.CosineAnnealingLR(optimizer, T_max=10)  # 学习率按余弦函数衰减，T_max为衰减的总epoch数</span><br><span class="line"></span><br><span class="line"># 在训练循环中的每个epoch后调用</span><br><span class="line">scheduler.step()  # 更新学习率</span><br></pre></td></tr></table></figure>

<ol>
<li>学习率衰减的指数调整：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">python</span><br><span class="line">import torch.optim as optim</span><br><span class="line"></span><br><span class="line">optimizer = optim.SGD(model.parameters(), lr=0.1)  # 定义优化器，初始学习率为0.1</span><br><span class="line">scheduler = optim.lr_scheduler.ExponentialLR(optimizer, gamma=0.9)  # 学习率每个epoch按gamma指数衰减</span><br><span class="line"></span><br><span class="line"># 在训练循环中的每个epoch后调用</span><br><span class="line">scheduler.step()  # 更新学习率</span><br></pre></td></tr></table></figure>

<p>这些是一些常见的学习率衰减方法，但还有其他方法可供选择。在PyTorch中，您可以使用<code>torch.optim.lr_scheduler</code>模块中提供的不同学习率调度器来实现这些方法。根据您的需求和实际情况，选择合适的学习率衰减策略，并将其与您的优化器结合使用，在训练循环中适时调用<code>scheduler.step()</code>来更新学习率。</p>
<h1 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"><span class="keyword">import</span> torch.optim <span class="keyword">as</span> optim</span><br><span class="line"><span class="keyword">import</span> torchvision</span><br><span class="line"><span class="keyword">import</span> torchvision.transforms <span class="keyword">as</span> transforms</span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义模型</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Net</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>(Net, self).__init__()</span><br><span class="line">        self.fc = nn.Linear(<span class="number">784</span>, <span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        x = x.view(-<span class="number">1</span>, <span class="number">784</span>)</span><br><span class="line">        x = self.fc(x)</span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line"></span><br><span class="line"><span class="comment"># 加载数据集</span></span><br><span class="line">transform = transforms.Compose([</span><br><span class="line">    transforms.ToTensor(),</span><br><span class="line">    transforms.Normalize((<span class="number">0.5</span>,), (<span class="number">0.5</span>,))</span><br><span class="line">])</span><br><span class="line">trainset = torchvision.datasets.MNIST(root=<span class="string">&#x27;./data&#x27;</span>, train=<span class="literal">True</span>, download=<span class="literal">True</span>, transform=transform)</span><br><span class="line">trainloader = torch.utils.data.DataLoader(trainset, batch_size=<span class="number">64</span>, shuffle=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 初始化模型和优化器</span></span><br><span class="line">model = Net()</span><br><span class="line">optimizer = optim.SGD(model.parameters(), lr=<span class="number">0.1</span>)</span><br><span class="line">scheduler = optim.lr_scheduler.StepLR(optimizer, step_size=<span class="number">5</span>, gamma=<span class="number">0.1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 训练循环</span></span><br><span class="line">num_epochs = <span class="number">10</span></span><br><span class="line"><span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(num_epochs):</span><br><span class="line">    running_loss = <span class="number">0.0</span></span><br><span class="line">    <span class="keyword">for</span> i, data <span class="keyword">in</span> <span class="built_in">enumerate</span>(trainloader, <span class="number">0</span>):</span><br><span class="line">        inputs, labels = data</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 清除梯度</span></span><br><span class="line">        optimizer.zero_grad()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 前向传播、损失计算和反向传播</span></span><br><span class="line">        outputs = model(inputs)</span><br><span class="line">        loss = nn.CrossEntropyLoss()(outputs, labels)</span><br><span class="line">        loss.backward()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 更新参数</span></span><br><span class="line">        optimizer.step()  <span class="comment"># 不需要调用 if scheduler is used</span></span><br><span class="line"></span><br><span class="line">        running_loss += loss.item()</span><br><span class="line">    scheduler.step()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 打印每个epoch的损失</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Epoch [&#123;&#125;/&#123;&#125;], Loss: &#123;:.4f&#125;&#x27;</span>.<span class="built_in">format</span>(epoch+<span class="number">1</span>, num_epochs, running_loss))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Training Finished.&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>在这个示例中，我们定义了一个简单的全连接神经网络模型（<code>Net</code>类），使用MNIST数据集进行训练。在训练循环中，我们首先清除梯度，然后进行正常的前向传播、损失计算和反向传播。然后，我们调用<code>optimizer.step()</code>来更新模型的参数，并调用<code>scheduler.step()</code>来更新学习率。最后，我们打印每个epoch的损失。</p>
<p>请根据您的具体情况和需求，对代码进行适当的调整和修改。这个示例提供了一个基本框架，可用于实现学习率衰减的训练过程。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://developer-hq.github.io/2023/06/03/%E6%A8%A1%E5%9E%8B%E4%BF%9D%E5%AD%98%E4%B8%8E%E8%AF%BB%E5%8F%96/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2023/06/03/%E6%A8%A1%E5%9E%8B%E4%BF%9D%E5%AD%98%E4%B8%8E%E8%AF%BB%E5%8F%96/" itemprop="url">模型保存与读取</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2023-06-03T16:20:21+08:00">
                2023-06-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="模型保存与读取"><a href="#模型保存与读取" class="headerlink" title="模型保存与读取"></a>模型保存与读取</h1><h2 id="save-model"><a href="#save-model" class="headerlink" title="save model"></a>save model</h2><p>这种方法可以直接读取模型，不需要初始化模型（model=Model()）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">import torch</span><br><span class="line">import torch.nn as nn</span><br><span class="line"></span><br><span class="line"># 保存全部模型</span><br><span class="line">PATH=&#x27;.../saved_model.pth.tar&#x27;</span><br><span class="line">torch.save(model, PATH)</span><br><span class="line"></span><br><span class="line"># load</span><br><span class="line">model = torch.load(PATH)</span><br><span class="line">model.eval()</span><br></pre></td></tr></table></figure>





<h2 id="save-state-dict"><a href="#save-state-dict" class="headerlink" title="save state_dict"></a>save state_dict</h2><p>这种方法需要初始化模型</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">import torch</span><br><span class="line">import torch.nn as nn</span><br><span class="line"></span><br><span class="line"># 保存全部模型</span><br><span class="line">PATH=&#x27;.../saved_model.pth.tar&#x27;</span><br><span class="line">torch.save(model.state_dict(), PATH)</span><br><span class="line"></span><br><span class="line"># load</span><br><span class="line">model = Model(*args, **kwargs)</span><br><span class="line">model = torch.load_state_dict(torch.load(PATH))</span><br><span class="line">model.eval()</span><br></pre></td></tr></table></figure>





<h3 id="eg"><a href="#eg" class="headerlink" title="eg:"></a>eg:</h3><h4 id="保存"><a href="#保存" class="headerlink" title="保存"></a>保存</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">def save_checkpoints(self, iteration, epoch, which_type):</span><br><span class="line">    state = &#123;</span><br><span class="line">        &#x27;iter&#x27;: iteration,</span><br><span class="line">        &#x27;epoch&#x27;: epoch,</span><br><span class="line">        &#x27;state_dict&#x27;: self.model.state_dict(),</span><br><span class="line">        &#x27;optim_dict&#x27;: self.model_optimizer.state_dict()</span><br><span class="line">    &#125;</span><br><span class="line">    torch.save(state, &#x27;./checkpoints/&#123;&#125;_iteration&#123;&#125;_&#123;&#125;.pth.tar&#x27;.format(self.prefix, iteration, which_type))</span><br><span class="line">    print(&#x27;&#123;&#125;_checkpoints saved successfully!&#x27;.format(which_type))</span><br></pre></td></tr></table></figure>

<h4 id="读取"><a href="#读取" class="headerlink" title="读取"></a>读取</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">device = torch.device(&quot;cuda&quot; if torch.cuda.is_available() else &quot;cpu&quot;)</span><br><span class="line"># 这里Model是已经定义好的模型</span><br><span class="line">model = Model().to(device)</span><br><span class="line">checkpoint = torch.load(&#x27;checkpoints/FD001_iteration1_best_RMSE.pth.tar&#x27;)  # 加载模型</span><br><span class="line">model.load_state_dict(checkpoint[&#x27;state_dict&#x27;])</span><br><span class="line">model.eval()</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://developer-hq.github.io/2023/05/17/vps/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2023/05/17/vps/" itemprop="url">vps</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2023-05-17T12:28:56+08:00">
                2023-05-17
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="x-ui"><a href="#x-ui" class="headerlink" title="x-ui"></a>x-ui</h1><ul>
<li>系统：debian 11.6</li>
</ul>
<h3 id="安装指令"><a href="#安装指令" class="headerlink" title="安装指令"></a>安装指令</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(curl -Ls https:/raw.githubusercontent.com/vaxilu/x-ui/master/install.sh)</span><br></pre></td></tr></table></figure>



<h3 id="打开面板"><a href="#打开面板" class="headerlink" title="打开面板"></a>打开面板</h3><p><strong>vps安全组策略需要打开54321端口</strong></p>
<p>1运行x-ui看程序有没有在运行。</p>
<p>2.netstat -tlnp | egrep 端口号，看端口</p>
<p>3.防火墙有没有放行该端口，有的系统默认开启ufw的，需要ufw allow 端口号。</p>
<h2 id="使用X-UI搭建代理服务，具有以下优点："><a href="#使用X-UI搭建代理服务，具有以下优点：" class="headerlink" title="使用X-UI搭建代理服务，具有以下优点："></a>使用X-UI搭建代理服务，具有以下优点：</h2><ul>
<li>支持系统状态监控：如CPU、内存、硬盘等状态</li>
<li>支持多用户多协议，网页可视化操作</li>
<li>支持流量统计</li>
<li>支持自定义Xray配置模板</li>
<li>支持HTTPS访问面板</li>
<li>支持面板自定义端口，账号与密码</li>
<li>快速生成分享连接或二维码</li>
<li>支持CDN套用</li>
<li>支持Fallback分流设置</li>
</ul>
<h2 id="一、-准备工作"><a href="#一、-准备工作" class="headerlink" title="一、 准备工作"></a>一、 准备工作</h2><ul>
<li>1、已经解析的域名，Win+R输入CMD 回车：键入ping 空格输入你的域名，检查一下是否可以ping通</li>
<li>2、一台境外VPS主流系统，例如：Debian/Ubuntu/CentOS</li>
<li>3、下载并安装FinalShell SSH工具</li>
</ul>
<p>官网下载地址: <a target="_blank" rel="noopener" href="https://www.hostbuf.com/c/131.html">https://www.hostbuf.com/c/131.html</a></p>
<h2 id="二、安装更新运行环境"><a href="#二、安装更新运行环境" class="headerlink" title="二、安装更新运行环境"></a>二、安装更新运行环境</h2><h2 id="安装-X-ui-面板"><a href="#安装-X-ui-面板" class="headerlink" title="安装 X-ui 面板"></a>安装 X-ui 面板</h2><h3 id="申请-SSL-证书"><a href="#申请-SSL-证书" class="headerlink" title="申请 SSL 证书"></a>申请 SSL 证书</h3><p>下面环境的安装方式，大家根据自己的系统选择命令安装就好了。</p>
<h3 id="1、Debian-Ubuntu系统执行以下命令："><a href="#1、Debian-Ubuntu系统执行以下命令：" class="headerlink" title="1、Debian/Ubuntu系统执行以下命令："></a>1、Debian/Ubuntu系统执行以下命令：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt update -y &amp;&amp; apt install -y curl &amp;&amp; apt install -y socat</span><br></pre></td></tr></table></figure>

<h3 id="2、CentOS系统执行以下命令："><a href="#2、CentOS系统执行以下命令：" class="headerlink" title="2、CentOS系统执行以下命令："></a>2、CentOS系统执行以下命令：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum update -y &amp;&amp; yum update -y &amp;&amp; yum install -y socat</span><br></pre></td></tr></table></figure>

<h3 id="运行Acme脚本"><a href="#运行Acme脚本" class="headerlink" title="运行Acme脚本"></a>运行Acme脚本</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl https://get.acme.sh | sh</span><br></pre></td></tr></table></figure>

<h3 id="申请证书及密钥"><a href="#申请证书及密钥" class="headerlink" title="申请证书及密钥"></a>申请证书及密钥</h3><p>【将代码中注释的邮箱和域名，改为你自己的】</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~/.acme.sh/acme.sh --register-account -m xxxx@gmail.com</span><br></pre></td></tr></table></figure>

<hr>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~/.acme.sh/acme.sh  --issue -d 输入你的域名  --standalone</span><br></pre></td></tr></table></figure>

<h3 id="下载证书及密钥"><a href="#下载证书及密钥" class="headerlink" title="下载证书及密钥"></a>下载证书及密钥</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~/.acme.sh/acme.sh --installcert -d 输入你的域名 --key-file /root/private.key --fullchain-file /root/cert.crt</span><br></pre></td></tr></table></figure>

<h3 id="安装-amp-升级x-ui面板一键脚本"><a href="#安装-amp-升级x-ui面板一键脚本" class="headerlink" title="安装&amp;升级x-ui面板一键脚本"></a>安装&amp;升级x-ui面板一键脚本</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(curl -Ls https://raw.githubusercontent.com/vaxilu/x-ui/master/install.sh)</span><br></pre></td></tr></table></figure>

<h3 id="BBR2加速"><a href="#BBR2加速" class="headerlink" title="BBR2加速"></a>BBR2加速</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget --no-check-certificate -q -O bbr2.sh &quot;https://github.com/yeyingorg/bbr2.sh/raw/master/bbr2.sh&quot; &amp;&amp; chmod +x bbr2.sh &amp;&amp; bash bbr2.sh auto</span><br></pre></td></tr></table></figure>

<h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><ul>
<li>1、如何在申请证书及密钥这一步搭建失败，检查并放行端口，口令如下：</li>
</ul>
<h3 id="放行80端口，放行443端口，把80改成443"><a href="#放行80端口，放行443端口，把80改成443" class="headerlink" title="放行80端口，放行443端口，把80改成443"></a>放行80端口，放行443端口，把80改成443</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -I INPUT -p tcp --dport 80 -j ACCEPT &amp;&amp; iptables -I INPUT -p tcp --dport 443 -j ACCEPT &amp;&amp; iptables -I INPUT -p tcp --dport 49999 -j ACCEPT</span><br></pre></td></tr></table></figure>

<h3 id="放行监听端口"><a href="#放行监听端口" class="headerlink" title="放行监听端口"></a>放行监听端口</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -I INPUT -p tcp --dport 56789 -j ACCEPT &amp;&amp; iptables -I INPUT -p tcp --dport 56790 -j ACCEPT &amp;&amp; iptables -I INPUT -p tcp --dport 56791 -j ACCEPT</span><br></pre></td></tr></table></figure>

<p>查看已开放的端口</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --list-ports</span><br></pre></td></tr></table></figure>

<p>开放端口（开放后需要要重启防火墙才生效）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --zone=public --add-port=3338/tcp --permanent</span><br></pre></td></tr></table></figure>

<p>重启防火墙</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure>

<p>停止防火墙</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop firewalld</span><br></pre></td></tr></table></figure>

<ul>
<li>2、如果是全新安装，默认网页端口为 54321，用户名和密码默认都是 admin ， 如何遇到打不开的情况，可能是端口没有放行，用【方法1】键入停止防火墙代码，或键入开放端口代码。</li>
<li>3、V2ray软件：设置——参数设置——V2rayN设置——Core类型改为Xray_Core</li>
</ul>
<h1 id="Cloudflare-Warp-原生-IP"><a href="#Cloudflare-Warp-原生-IP" class="headerlink" title="Cloudflare Warp 原生 IP"></a>Cloudflare Warp 原生 IP</h1><p>很多我们需要访问的网站都需要使用“原生 IP”，比如：<a target="_blank" rel="noopener" href="https://www.disneyplus.com/">Disney+</a>， <a target="_blank" rel="noopener" href="https://chat.openai.com/">ChatGPT</a>，<a target="_blank" rel="noopener" href="https://www.bing.com/">New Bing</a> 等。</p>
<p>所谓“原生 IP”就是指该网站的 IP 地址和其机房的 IP 地址是一致的，但是，很多 IDC 提供商的 IP  都是从其它国家调配来的，这导致我们就算是翻墙了，也是使用了美国的 VPS，但是还是访问不了相关的服务。所以，我们需要使用 Cloudflare  Warp 来访问这些网站。</p>
<p>下面有几种安装方式：</p>
<ul>
<li>全局模式。这种模式下，所有流量都会通过 Cloudflare 的网络，相当于VPN。</li>
<li>代理模式。通过在服务器本机启动一个 SOCKS5 代理，然后把需要的流量转发到这个代理上。</li>
</ul>
<h4 id="10-4-1-WARP-模式"><a href="#10-4-1-WARP-模式" class="headerlink" title="10.4.1 WARP 模式"></a>10.4.1 WARP 模式</h4><p>WARP 模式是 Cloudflare 提供的一种全局代理模式，就是一个客户端的 VPN，它会将你的所有流量都通过 Cloudflare 的网络，这样就能访问到原生 IP 了。</p>
<p>你可以使用这个一键安装的脚本来快速完成安装 <a target="_blank" rel="noopener" href="https://github.com/P3TERX/warp.sh">https://github.com/P3TERX/warp.sh</a></p>
<p>下载脚本 运行脚本 中文菜单</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget git.io/warp.sh &amp;&amp; chmod +x warp.sh </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./warp.sh menu</span><br></pre></td></tr></table></figure>

<p>先后执行如下安装：</p>
<ul>
<li>1 - 安装 Cloudflare WARP 官方客户端</li>
<li>4 - 安装 WireGuard 相关组件</li>
<li>7 - 自动配置 WARP WireGuard 双栈全局网络</li>
</ul>
<blockquote>
</blockquote>
<blockquote>
<p>Note</p>
<ol>
<li><p>如果没有 IPv6 网络，那么第 7 步可以换成第 5 步 自动配置 WARP WireGuard IPv4 网络，或是执行 <code>./warp.sh 4</code>。</p>
</li>
<li><p>你需要备份一下你的帐号和配置文件，在 <code>/etc/warp/</code> 目录下，主要是两个文件，一个是 <code>wgcf-account.toml</code>，一个是 <code>wgcf-profile.conf</code></p>
</li>
<li><p>这个脚本会启动两个 Systemd 服务，一个是 <code>warp-svc</code>，另一个是 <code>wg-quick@wgcf</code>。第一个是 Cloudflare Warp 的服务，第二个是 WireGuard 的服务。</p>
</li>
<li><p>你可以使用 <code>./warp.sh status</code> 来查看服务的状态，如果正常的话，会显示如下的信息。如果你的服务没有正常启动，那么会自动 <code>disable wg-quick@wgcf</code>，如果这样的话，你可以使用 <code>./warp.sh d</code>（IPv4 + IPv6 双栈网格）或是 <code>./warp.sh 4</code>（IPv4 网络） 来重头走一遍所有的安装过程。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">WireGuard	: Running</span><br><span class="line">IPv4 Network	: WARP</span><br><span class="line">IPv6 Network	: WARP</span><br></pre></td></tr></table></figure></li>
</ol>
</blockquote>
<p>使用 <code>curl ipinfo.io</code> 命令来检查你的 IP 地址，如果显示的是 Cloudflare 的 IP 地址，那么恭喜你，你已经成功了。如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;ip&quot;: &quot;104.28.227.191&quot;,</span><br><span class="line">  &quot;city&quot;: &quot;Los Angeles&quot;,</span><br><span class="line">  &quot;region&quot;: &quot;California&quot;,</span><br><span class="line">  &quot;country&quot;: &quot;US&quot;,</span><br><span class="line">  &quot;loc&quot;: &quot;34.0522,-118.2437&quot;,</span><br><span class="line">  &quot;org&quot;: &quot;AS13335 Cloudflare, Inc.&quot;,</span><br><span class="line">  &quot;postal&quot;: &quot;90009&quot;,</span><br><span class="line">  &quot;timezone&quot;: &quot;America/Los_Angeles&quot;,</span><br><span class="line">  &quot;readme&quot;: &quot;https://ipinfo.io/missingauth&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="trojan-panel"><a href="#trojan-panel" class="headerlink" title="trojan-panel"></a>trojan-panel</h1><h3 id="云解析"><a href="#云解析" class="headerlink" title="云解析"></a>云解析</h3><p>阿里云把域名解析到服务器ip</p>
<h3 id="关闭防火墙"><a href="#关闭防火墙" class="headerlink" title="关闭防火墙"></a>关闭防火墙</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ufw disable</span><br></pre></td></tr></table></figure>

<h3 id="放行80-443-8888以及监听端口"><a href="#放行80-443-8888以及监听端口" class="headerlink" title="放行80 443 8888以及监听端口"></a>放行80 443 8888以及监听端口</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -I INPUT -p tcp --dport 80 -j ACCEPT &amp;&amp; iptables -I INPUT -p tcp --dport 443 -j ACCEPT &amp;&amp; iptables -I INPUT -p tcp --dport 8888 -j ACCEPT &amp;&amp; iptables -I INPUT -p tcp --dport 6500 -j ACCEPT &amp;&amp; iptables -I INPUT -p tcp --dport 6501 -j ACCEPT &amp;&amp; iptables -I INPUT -p tcp --dport 6502 -j ACCEPT &amp;&amp; iptables -I INPUT -p tcp --dport 8100 -j ACCEPT</span><br></pre></td></tr></table></figure>

<h3 id="先安trojan-panel"><a href="#先安trojan-panel" class="headerlink" title="先安trojan panel"></a>先安trojan panel</h3><p><a target="_blank" rel="noopener" href="https://trojanpanel.github.io/install-tutorial/installation.html#%E5%87%86%E5%A4%87">https://trojanpanel.github.io/install-tutorial/installation.html#%E5%87%86%E5%A4%87</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source &lt;(curl -L https://github.com/trojanpanel/install-script/raw/main/install_script.sh)</span><br></pre></td></tr></table></figure>

<p>运行123，安装前后端和内核</p>
<p>运行这个命令来安装前后端，安装一部分就要运行一次这个</p>
<p><img src="/2023/05/17/vps/image-20230606113906038.png" alt="image-20230606113906038"></p>
<h3 id="Warp-cloudflare"><a href="#Warp-cloudflare" class="headerlink" title="Warp cloudflare"></a>Warp cloudflare</h3><p>下载脚本 运行脚本 中文菜单</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget git.io/warp.sh &amp;&amp; chmod +x warp.sh </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./warp.sh menu</span><br></pre></td></tr></table></figure>

<p>先后执行如下安装：</p>
<ul>
<li>1 - 安装 Cloudflare WARP 官方客户端</li>
<li>4 - 安装 WireGuard 相关组件</li>
<li>7 - 自动配置 WARP WireGuard 双栈全局网络</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl ipinfo.io</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl https://www.bing.com/search?q=why -I</span><br><span class="line">curl -x socks5://127.0.0.1:40000 https://www.bing.com/search?q=why -I</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>看一下ip</p>
<h3 id="网页端设置"><a href="#网页端设置" class="headerlink" title="网页端设置"></a>网页端设置</h3><p>先设置服务器</p>
<p>再设置节点</p>
<h1 id="BBR2加速-1"><a href="#BBR2加速-1" class="headerlink" title="BBR2加速"></a>BBR2加速</h1><p>trojan-panel不能用bbr2，开了就崩</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget --no-check-certificate -q -O bbr2.sh &quot;https://github.com/yeyingorg/bbr2.sh/raw/master/bbr2.sh&quot; &amp;&amp; chmod +x bbr2.sh &amp;&amp; bash bbr2.sh auto</span><br></pre></td></tr></table></figure>



<h1 id="移动端vpn配置"><a href="#移动端vpn配置" class="headerlink" title="移动端vpn配置"></a>移动端vpn配置</h1><p>==<strong>使用shadowrock</strong>==</p>
<p><a target="_blank" rel="noopener" href="https://johnshall.github.io/Shadowrocket-ADBlock-Rules-Forever/#">https://johnshall.github.io/Shadowrocket-ADBlock-Rules-Forever/#</a></p>
<h2 id="规则使用方法"><a href="#规则使用方法" class="headerlink" title="规则使用方法"></a>规则使用方法</h2><p>方法一：用 Safari 或 ShadowRocket 扫描二维码即可。<br> 方法二：在 ShadowRocket 应用中，进入 [配置] 页面，点击右上角加号，将规则文件地址粘贴到 url 处，点击“下载”即可。</p>
<p>最好让 ShadowRocket 断开并重新连接一次，以确保新的规则文件生效。</p>
<h2 id="如何自动更新"><a href="#如何自动更新" class="headerlink" title="如何自动更新"></a>如何自动更新</h2><p>步骤一：安装<a target="_blank" rel="noopener" href="https://www.icloud.com/shortcuts/20bd590bc99e4ef0a157d2fe6e8c273d">捷径</a>，并填写规则文件地址；<br> 步骤二：打开“快捷指令”下方的“自动化”，轻击右上角加号，点击“创建个人自动化”，选择“特定时间”，设定时间为 8:05  或更晚的时间（规则生成需要一定时间），点击下一步，点击添加操作，选择 APP  栏，找到快捷指令，选择“运行快捷指令”，点击浅色“快捷指令”，选择“Shadowrocket  规则自动更新”，点击下一步，关闭运行前询问（可选），点击完成即可。</p>
<p>如果出现无法正常跳转 Safari 对 google.cn 的请求的情况，请在每次更新后点击规则后方的ℹ️，点击 HTTPS 解密，将 HTTPS 解密关闭，返回，再开启，即可正常跳转。</p>
<p><strong>==使用黑名单模式==</strong></p>
<h2 id="黑名单过滤-广告"><a href="#黑名单过滤-广告" class="headerlink" title="黑名单过滤 + 广告"></a>黑名单过滤 + 广告</h2><p>黑名单中包含了境外网站中无法访问的那些，对不确定的网站则默认直连。</p>
<ul>
<li>代理：被墙的网站（GFWList）</li>
<li>直连：正常的网站</li>
<li>包含广告过滤</li>
</ul>
<p>规则地址：<a target="_blank" rel="noopener" href="https://johnshall.github.io/Shadowrocket-ADBlock-Rules-Forever/sr_top500_banlist_ad.conf">https://johnshall.github.io/Shadowrocket-ADBlock-Rules-Forever/sr_top500_banlist_ad.conf</a></p>
<h1 id="trojan"><a href="#trojan" class="headerlink" title="trojan"></a>trojan</h1><p><a target="_blank" rel="noopener" href="https://github.com/Jrohy/trojan">https://github.com/Jrohy/trojan</a></p>
<h1 id="bbr"><a href="#bbr" class="headerlink" title="bbr"></a>bbr</h1><p><a target="_blank" rel="noopener" href="https://teddysun.com/489.html">https://teddysun.com/489.html</a> </p>
<h1 id="RackNerd"><a href="#RackNerd" class="headerlink" title="RackNerd"></a>RackNerd</h1><h2 id="1-没有curl，apt-update报错"><a href="#1-没有curl，apt-update报错" class="headerlink" title="1.没有curl，apt update报错"></a>1.没有curl，apt update报错</h2><p>换源</p>
<ol>
<li><p>方式1： 更换/etc/apt/sources.list文件里的源</p>
<p> 备份源列表</p>
<p> Linux配置的默认源并不是国内的服务器，下载更新软件都比较慢。首先备份源列表文件sources.list：</p>
<p> <strong>sudo cp /etc/apt/sources.list /etc/apt/sources.list_backup20221122 #备份源列表</strong></p>
<p> 修改源列表文件</p>
<p> <strong>sudo gedit /etc/apt/sources.list # 打开sources.list文件</strong></p>
<p> 编辑/etc/apt/sources.list文件, 在文件最前面添加镜像源:</p>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">deb http://httpredir.debian.org/debian-debug buster-debug main contrib non-free</span><br><span class="line">deb http://httpredir.debian.org/debian buster main contrib non-free</span><br><span class="line">deb-src http://ftp.debian.org/debian buster main contrib non-free</span><br><span class="line"></span><br><span class="line">deb http://security.debian.org/ buster/updates main contrib non-free</span><br><span class="line">deb-src http://security.debian.org/ buster/updates main contrib non-free</span><br><span class="line"></span><br><span class="line">deb http://deb.debian.org/debian stretch-updates main contrib non-free</span><br><span class="line">deb-src http://deb.debian.org/debian stretch-updates main contrib non-free</span><br><span class="line"></span><br><span class="line">deb http://www.bchemnet.com/suldr/ debian extra</span><br></pre></td></tr></table></figure>



<h2 id="2-安装trojan"><a href="#2-安装trojan" class="headerlink" title="2.安装trojan"></a>2.安装trojan</h2><p>放行防火墙</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -I INPUT -p tcp --dport 80 -j ACCEPT &amp;&amp; iptables -I INPUT -p tcp --dport 443 -j ACCEPT &amp;&amp; iptables -I INPUT -p tcp --dport 8888 -j ACCEPT &amp;&amp; iptables -I INPUT -p tcp --dport 6500 -j ACCEPT &amp;&amp; iptables -I INPUT -p tcp --dport 6501 -j ACCEPT &amp;&amp; iptables -I INPUT -p tcp --dport 6502 -j ACCEPT &amp;&amp; iptables -I INPUT -p tcp --dport 8100 -j ACCEPT</span><br></pre></td></tr></table></figure>

<p>安装</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source &lt;(curl -sL https://git.io/trojan-install)</span><br></pre></td></tr></table></figure>

<p>安装mysql</p>
<p>随便选个证书</p>
<h2 id="3-chatgpt-newbing"><a href="#3-chatgpt-newbing" class="headerlink" title="3.chatgpt newbing"></a>3.chatgpt newbing</h2><h3 id="Warp-cloudflare-1"><a href="#Warp-cloudflare-1" class="headerlink" title="Warp cloudflare"></a>Warp cloudflare</h3><p>下载脚本 运行脚本 中文菜单</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget git.io/warp.sh &amp;&amp; chmod +x warp.sh </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./warp.sh menu</span><br></pre></td></tr></table></figure>

<p>先后执行如下安装：</p>
<ul>
<li>1 - 安装 Cloudflare WARP 官方客户端</li>
<li>4 - 安装 WireGuard 相关组件</li>
<li>7 - 自动配置 WARP WireGuard 双栈全局网络</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl ipinfo.io</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl https://www.bing.com/search?q=why -I</span><br><span class="line">curl -x socks5://127.0.0.1:40000 https://www.bing.com/search?q=why -I</span><br><span class="line"></span><br></pre></td></tr></table></figure>





<h1 id="最全一键脚本"><a href="#最全一键脚本" class="headerlink" title="最全一键脚本"></a>最全一键脚本</h1><p><a target="_blank" rel="noopener" href="https://github.com/jinwyp/one_click_script/blob/master/README2_CN.md">https://github.com/jinwyp/one_click_script/blob/master/README2_CN.md</a></p>
<h3 id="安装顺序"><a href="#安装顺序" class="headerlink" title="安装顺序"></a>安装顺序</h3><ul>
<li><p>安装内核</p>
<ul>
<li><p>debian：1-41</p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://github.com/jinwyp/one_click_script/blob/master/KERNEL_CN.md">https://github.com/jinwyp/one_click_script/blob/master/KERNEL_CN.md</a></p>
</li>
<li><p>CentOS / AlmaLinux / Rocky Linux 系统安装新版 linux 内核. 运行脚本后 请选择31  安装官方源最新版5.16内核 或选择35 安装 LTS 5.10 内核 推荐安装 LTS 5.10. 根据提示需要重启2次 完成内核安装。</p>
<p>Debian / Ubuntu 系统安装新版 linux 内核. 运行脚本后 Debian 请选择41 安装 LTS 5.10 内核, Ubuntu 请选择45 安装 LTS 5.10 内核. 根据提示需要重启2次 完成内核安装。</p>
</li>
</ul>
</li>
<li><p>安装bbr</p>
<ul>
<li>1-2-4</li>
</ul>
</li>
<li><p>WireGuard Socks（不知道为什么wg ipv4和v6不能用，只能socks）</p>
<ul>
<li>1-11</li>
<li>使用Cloudflare WARP sock5 方式解锁. 运行脚本后 选择11 安装 Cloudflare WARP 官方 linux client sock5 代理, 安装完成后系统已经启动 WARP的sock5 代理. 重新运行脚本 选择21 测试一下 WARP sock5 是否已经解锁Netflix.</li>
<li>使用Cloudflare WARP IPv6 方式解锁. 运行脚本后 选择12 安装 Wireguard 和 Cloudflare  WARP. 安装成功后系统会启用IPv6, 但默认还是优先使用IPv4 访问网络. 重新运行脚本 选择21 测试一下 IPv6  是否已经解锁Netflix.</li>
<li>解锁 Netflix 等流媒体网站. 通过本项目内的<a target="_blank" rel="noopener" href="https://github.com/jinwyp/one_click_script/blob/master/README_CN.md">另一脚本</a> 安装V2ray, 安装过成功中根据提示设置域名分流规则, 让流媒体网站使用IPv6 或 WARP sock5解锁即可.</li>
<li>解锁 Google reCAPTCHA 人机验证. 通过本项目内的<a target="_blank" rel="noopener" href="https://github.com/jinwyp/one_click_script/blob/master/README_CN.md">另一脚本</a> 安装V2ray, 安装过成功中根据提示设置域名分流规则, 让Google网站使用IPv6 或 WARP sock5解锁即可. 推荐使用 IPv6 来避免 Google reCAPTCHA 人机验证.</li>
</ul>
</li>
<li><p>安装trojan</p>
<ul>
<li>直接30-1 安装 trojan-web (trojan 和 trojan-go 可视化管理面板) 和 nginx 伪装网站</li>
<li>注意：mysql docker和证书那得输入数字</li>
</ul>
</li>
<li><p>Netflix？</p>
<ul>
<li>后面再研究</li>
</ul>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://developer-hq.github.io/2023/05/10/Transformer/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2023/05/10/Transformer/" itemprop="url">Transformer</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2023-05-10T12:27:03+08:00">
                2023-05-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a target="_blank" rel="noopener" href="http://nlp.seas.harvard.edu/annotated-transformer/">http://nlp.seas.harvard.edu/annotated-transformer/</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://developer-hq.github.io/2023/05/10/firefox%E5%9C%B0%E5%9D%80%E6%A0%8F%E6%90%9C%E7%B4%A2%E8%AE%BE%E7%BD%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2023/05/10/firefox%E5%9C%B0%E5%9D%80%E6%A0%8F%E6%90%9C%E7%B4%A2%E8%AE%BE%E7%BD%AE/" itemprop="url">firefox地址栏搜索设置</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2023-05-10T12:20:01+08:00">
                2023-05-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="【Firefox-问题解决】在新标签页搜索栏中输入直接跳到地址栏【firefox吧】-百度贴吧-16"><a href="#【Firefox-问题解决】在新标签页搜索栏中输入直接跳到地址栏【firefox吧】-百度贴吧-16" class="headerlink" title="【Firefox 问题解决】在新标签页搜索栏中输入直接跳到地址栏【firefox吧】_百度贴吧 16"></a><a target="_blank" rel="noopener" href="https://tieba.baidu.com/p/7393128083">【Firefox 问题解决】在新标签页搜索栏中输入直接跳到地址栏【firefox吧】_百度贴吧 16</a></h3><p>【Firefox 问..地址栏输入  about:config  ，回车，搜索 browser.newtabpage.activity-stream.improvesearch.handoffToAwesomebar  切换为 false  。即时生效</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://developer-hq.github.io/2023/05/06/%E5%85%89%E7%8C%AB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2023/05/06/%E5%85%89%E7%8C%AB/" itemprop="url">光猫</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2023-05-06T18:29:26+08:00">
                2023-05-06
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="移动光猫h3-1prolite"><a href="#移动光猫h3-1prolite" class="headerlink" title="移动光猫h3-1prolite"></a>移动光猫h3-1prolite</h1><h3 id="用user登陆"><a href="#用user登陆" class="headerlink" title="用user登陆"></a>用user登陆</h3><p>然后打开telnet</p>
<p><a target="_blank" rel="noopener" href="http://192.168.1.1/usr=CMCCAdmin&amp;psw=aDm8H%25MdA&amp;cmd=1&amp;telnet.gch">http://192.168.1.1/usr=CMCCAdmin&amp;psw=aDm8H%25MdA&amp;cmd=1&amp;telnet.gch</a></p>
<h3 id="telnet登陆（windows功能打开telnet）"><a href="#telnet登陆（windows功能打开telnet）" class="headerlink" title="telnet登陆（windows功能打开telnet）"></a>telnet登陆（windows功能打开telnet）</h3><p>用户名 CMCCAdmin</p>
<p>密码 aDm8H%MdA</p>
<p> 修改管理员超级账号为 CMCCAdmin (可自定义)<br> sidbg 1 DB set DevAuthInfo 0 User CMCCAdmin</p>
<p> 修改管理员超级账号的密码 aDm8H%MdA (可自定义)<br> sidbg 1 DB set DevAuthInfo 0 Pass aDm8H%MdA</p>
<h3 id="网关登陆"><a href="#网关登陆" class="headerlink" title="网关登陆"></a>网关登陆</h3><p>用户名 CMCCAdmin</p>
<p>密码 </p>
<p>aDm8H%MdA</p>
<p>user</p>
<p>wyrfe5rp</p>
<p><a target="_blank" rel="noopener" href="https://www.right.com.cn/forum/thread-8266942-1-1.html">https://www.right.com.cn/forum/thread-8266942-1-1.html</a></p>
<p><a target="_blank" rel="noopener" href="https://www.right.com.cn/FORUM/thread-8125150-1-1.html">https://www.right.com.cn/FORUM/thread-8125150-1-1.html</a></p>
<p>1.获取管理员密码 enable telnet      浏览器输入 ： <a target="_blank" rel="noopener" href="http://192.168.1.1/usr=CMCCAdmin&amp;psw=aDm8H%25MdA&amp;cmd=1&amp;telnet.gch">http://192.168.1.1/usr=CMCCAdmin&amp;psw=aDm8H%25MdA&amp;cmd=1&amp;telnet.gch</a><br> 2.telnet 光猫（192.168.1.1） 默认密码  账号：CMCCAdmin 密码: aDm8H%MdA<br> 3.解密命令<br>   sidbg 1 DB decry /userconfig/cfg/db_user_cfg.xml<br>   log文件在<br>   /tmp/debug-decry-cfg   直接vi 搜索或者cat 出来 用文本搜索，注意这里的密码是临时密码。如果不删除 网络中TR069 此密码会周期被移动修改。<br> 4.更改CMCCAdmin密码并save<br>  sidbg 1 DB set DevAuthInfo 0 Pass fuck;sidbg 1 DB save<br>  其中fuck是你新密码可以改为任何你需要的。<br> 5.删除TR069 网络，切断移动后台控制！ 此处用F12也可以，鼠标在删除（灰色）右键 Inspect （检查），找到源码，把disable 删除。现在删除就可以点了。干掉他！！！<br> 6.配置桥接模式<br>   找到网络里面 Internet连接 把没用的连接拍照记录vlan id后都删除，重新建立一个vlan id=10的 bridge即可。<br> 7待研究，是否可以使能SSID1 为iptv 模式电视看IPTV，明天问下移动客户后在update！！！</p>
<p> 看到好多要钱分享！！真的不应该。平时好好工作接个私活不行吗。在论坛一块一块的要没啥意思。</p>
<p> PS：这里感谢下 大神无私分享@oick88<br> PS:给出几个常用的<br> #列出所有表<br> sidbg 1 DB p all<br> #查看 TELNET 信息<br> sidbg 1 DB p TelnetCfg<br> #查看 查看用户 信息<br> sidbg 1 DB p DevAuthInfo</p>
<p> 修改管理员超级账号为 CMCCAdmin (可自定义)<br> sidbg 1 DB set DevAuthInfo 0 User CMCCAdmin</p>
<p> 修改管理员超级账号的密码 aDm8H%MdA (可自定义)<br> sidbg 1 DB set DevAuthInfo 0 Pass aDm8H%MdA</p>
<p> 修改配置 永久 开启 TELNET<br> #开启TELNET<br> sidbg 1 DB set TelnetCfg 0 TS_Enable 1<br> #开放TELNET LAN端口<br> sidbg 1 DB set TelnetCfg 0 Lan_Enable 1</p>
<p> #关闭TELNET<br> sidbg 1 DB set TelnetCfg 0 TS_Enable 0<br> #关闭TELNET LAN端口<br> sidbg 1 DB set TelnetCfg 0 Lan_Enable 0</p>
<p> #修改TELNET账号  改为 root (可自定义)<br> sidbg 1 DB set TelnetUser 0 Username root<br> #修改TELNET密码 改为 admin (可自定义)<br> sidbg 1 DB set TelnetUser 0 Password admin</p>
<p> #修改TELNET账号 改为 root (可自定义)<br> sidbg 1 DB set TelnetUser 1 Username root<br> #修改TELNET密码 改为 admin (可自定义)<br> sidbg 1 DB set TelnetUser 1 Password admin</p>
<p> #记得最好保存下配置<br> sidbg 1 DB save</p>
<p>vid10</p>
<p>桥接：</p>
<p><img src="/2023/05/06/%E5%85%89%E7%8C%AB/image-20230513005047164.png" alt="image-20230513005047164"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://developer-hq.github.io/2023/04/29/%E5%9C%A8%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86%E5%99%A8%E4%B8%AD%E6%89%93%E5%BC%80%E5%BD%93%E5%89%8D%E8%B7%AF%E5%BE%84/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2023/04/29/%E5%9C%A8%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86%E5%99%A8%E4%B8%AD%E6%89%93%E5%BC%80%E5%BD%93%E5%89%8D%E8%B7%AF%E5%BE%84/" itemprop="url">CMD在资源管理器中打开当前路径</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2023-04-29T23:40:10+08:00">
                2023-04-29
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="【Windows-命令行】CMD-在资源管理器中打开当前路径"><a href="#【Windows-命令行】CMD-在资源管理器中打开当前路径" class="headerlink" title="【Windows 命令行】CMD 在资源管理器中打开当前路径"></a>【Windows 命令行】CMD 在资源管理器中打开当前路径</h1><p>输出：<code>explorer %cd%</code>回车</p>
<hr>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/u014636245/article/details/89889671">https://blog.csdn.net/u014636245/article/details/89889671</a></p>
<p>CMD中利用资源管理器打开当前路径</p>
<p>在cmd中需要查看文件夹对应资源时，手动打开十分不便，利用explorer命令可以便捷的打开对应的路径：</p>
<p>输出：explorer %cd%回车<br>在这里插入图片描述<br>效果：<br>在这里插入图片描述<br>解释</p>
<p>%cd%为current directory,系统环境变量，表示当前目录位置，可以输出确认：<br>在这里插入图片描述<br>exploreor是资源管理器的命令，可以接受path路径作为输入。</p>
<p>ref:<br><a target="_blank" rel="noopener" href="https://wenwen.sogou.com/z/q825809466.htm">https://wenwen.sogou.com/z/q825809466.htm</a><br><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/30219402">https://zhuanlan.zhihu.com/p/30219402</a><br>explorer params:<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/yunyu5120/article/details/6024506">https://blog.csdn.net/yunyu5120/article/details/6024506</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/zhuzhuyule/article/details/51063148">https://blog.csdn.net/zhuzhuyule/article/details/51063148</a></p>
<p>在这里插入图片描述</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://developer-hq.github.io/2023/04/26/Nas/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2023/04/26/Nas/" itemprop="url">Nas</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2023-04-26T19:09:51+08:00">
                2023-04-26
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="ikuai"><a href="#ikuai" class="headerlink" title="ikuai"></a>ikuai</h1><p>http:</p>
<p>192.168.0.107:8881</p>
<p>https:</p>
<p>192.168.0.107:4443</p>
<p><img src="/2023/04/26/Nas/image-20230502140849515.png" alt="image-20230502140849515"></p>
<p><img src="/2023/04/26/Nas/image-20230502140813570.png" alt="image-20230502140813570"></p>
<p><img src="/2023/04/26/Nas/image-20230502140806094.png" alt="image-20230502140758186"></p>
<p>bash设置lan，wan</p>
<p>进来设置dhcp，lan</p>
<p>重启本地网络</p>
<h1 id="群晖"><a href="#群晖" class="headerlink" title="群晖"></a>群晖</h1><p>192.168.0.107:5000</p>
<p>samba也打开了</p>
<h1 id="esxi"><a href="#esxi" class="headerlink" title="esxi"></a>esxi</h1><p>DMZ主机</p>
<p>直接访问</p>
<p>192.168.0.107</p>
<h2 id="rdm硬盘直通"><a href="#rdm硬盘直通" class="headerlink" title="rdm硬盘直通"></a>rdm硬盘直通</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">vmkfstools -z /vmfs/devices/disks/t10.ATA_____ST4000VX0152D3CU104__________________________________WW6083E7 /vmfs/volumes/6449615b-232b02f8-41d2-309c23af5243/HDD1.vmdk &amp;&amp;</span><br><span class="line"></span><br><span class="line">vmkfstools -z /vmfs/devices/disks/t10.ATA_____ST4000VX0152D3CU104__________________________________WW607DYE /vmfs/volumes/6449615b-232b02f8-41d2-309c23af5243/HDD2.vmdk &amp;&amp;</span><br><span class="line"></span><br><span class="line">vmkfstools -z /vmfs/devices/disks/t10.ATA_____ST4000VX0152D3CU104__________________________________WW607DVN /vmfs/volumes/6449615b-232b02f8-41d2-309c23af5243/HDD3.vmdk &amp;&amp;</span><br><span class="line"></span><br><span class="line">vmkfstools -z /vmfs/devices/disks/t10.ATA_____ST4000VX0152D3CU104__________________________________WW6083GG /vmfs/volumes/6449615b-232b02f8-41d2-309c23af5243/HDD4.vmdk &amp;&amp;</span><br><span class="line"></span><br><span class="line">vmkfstools -z /vmfs/devices/disks/t10.ATA_____ST4000VX0152D3CU104__________________________________WW606EX1 /vmfs/volumes/6449615b-232b02f8-41d2-309c23af5243/HDD5.vmdk</span><br></pre></td></tr></table></figure>







<h2 id="网卡？"><a href="#网卡？" class="headerlink" title="网卡？"></a>网卡？</h2><p>INT_bootbank_ixgben_1.12.3.0-1OEM.700.1.0.15843807.vib</p>
<p>esxcli software vib install -v /tmp/INT_bootbank_ixgben_1.12.3.0-1OEM.700.1.0.15843807.vib</p>
<p>esxupdate –bundle=Intel-ixgben_1.12.2.0-1OEM.700.1.0.15843807_19203188-package.zip update</p>
<h1 id="端口映射"><a href="#端口映射" class="headerlink" title="端口映射"></a>端口映射</h1><p>  5000,137-139,445,3389,21,22,55536-55791,5005,5006,3000-3003</p>
<p>  3300,8082,8999,8085,9091,19035,19037,8096</p>
<h1 id="esxi-ikuai-openwrt"><a href="#esxi-ikuai-openwrt" class="headerlink" title="esxi+ikuai+openwrt"></a>esxi+ikuai+openwrt</h1><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Ba4y1f7Kb/?is_story_h5=false&amp;p=1&amp;share_from=ugc&amp;share_medium=iphone&amp;share_plat=ios&amp;share_session_id=48E8BBDC-1B4A-490C-867B-43A67A2671E9&amp;share_source=WEIXIN&amp;share_tag=s_i&amp;timestamp=1667907084&amp;unique_k=GdAAja4&amp;wxfid=o7omF0erHEf20s-zaKvo15-BZZVU&amp;share_times=1">https://www.bilibili.com/video/BV1Ba4y1f7Kb/?is_story_h5=false&amp;p=1&amp;share_from=ugc&amp;share_medium=iphone&amp;share_plat=ios&amp;share_session_id=48E8BBDC-1B4A-490C-867B-43A67A2671E9&amp;share_source=WEIXIN&amp;share_tag=s_i&amp;timestamp=1667907084&amp;unique_k=GdAAja4&amp;wxfid=o7omF0erHEf20s-zaKvo15-BZZVU&amp;share_times=1</a></p>
<h1 id="arpl黑群晖"><a href="#arpl黑群晖" class="headerlink" title="arpl黑群晖"></a>arpl黑群晖</h1><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1xx4y1N7ME/?buvid=ZC42C6CE32ABEA014D229DBE452EDDF6071D&amp;is_story_h5=false&amp;mid=PWVGiYRDijlmlaFjoG8Siw==&amp;p=1&amp;plat_id=114&amp;share_from=ugc&amp;share_medium=iphone&amp;share_plat=ios&amp;share_session_id=D71AA741-B89A-45C8-8565-1EED5B88C614&amp;share_source=WEIXIN&amp;share_tag=s_i&amp;timestamp=1682507419&amp;unique_k=V4uumVd&amp;up_id=248592535">https://www.bilibili.com/video/BV1xx4y1N7ME/?buvid=ZC42C6CE32ABEA014D229DBE452EDDF6071D&amp;is_story_h5=false&amp;mid=PWVGiYRDijlmlaFjoG8Siw%3D%3D&amp;p=1&amp;plat_id=114&amp;share_from=ugc&amp;share_medium=iphone&amp;share_plat=ios&amp;share_session_id=D71AA741-B89A-45C8-8565-1EED5B88C614&amp;share_source=WEIXIN&amp;share_tag=s_i&amp;timestamp=1682507419&amp;unique_k=V4uumVd&amp;up_id=248592535</a></p>
<p>arpl用cd驱动器打开</p>
<p>直接安装，选择ds920+</p>
<h1 id="群晖硬盘rdm直通"><a href="#群晖硬盘rdm直通" class="headerlink" title="群晖硬盘rdm直通"></a>群晖硬盘rdm直通</h1><p>1.安装DS920+ 7.1</p>
<p>arpl安装DS920+</p>
<p>选择DSM_DS920+_42962.pat</p>
<p>2.putty ssh esxi创建磁盘</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_34208844/article/details/108261126?app_version=5.15.3&amp;csdn_share_tail=%7B%22type%22:%22blog%22,%22rType%22:%22article%22,%22rId%22:%22108261126%22,%22source%22:%22weixin_45725190%22%7D&amp;utm_source=app">https://blog.csdn.net/qq_34208844/article/details/108261126?app_version=5.15.3&amp;csdn_share_tail=%7B%22type%22%3A%22blog%22%2C%22rType%22%3A%22article%22%2C%22rId%22%3A%22108261126%22%2C%22source%22%3A%22weixin_45725190%22%7D&amp;utm_source=app</a></p>
<p><img src="/2023/04/26/Nas/image-20230427152859022.png" alt="image-20230427152859022"></p>
<p>==<strong>使用命令挂载硬盘</strong>==：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vmkfstools -z /vmfs/devices/disks/未格式化硬盘标识符 /vmfs/volumes/ESXI系统盘路径/自定义名称.vmdk</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">vmkfstools -z /vmfs/devices/disks/t10.ATA_____ST4000VX0152D3CU104__________________________________WW6083E7 /vmfs/volumes/6449615b-232b02f8-41d2-309c23af5243/HDD1.vmdk &amp;&amp;</span><br><span class="line"></span><br><span class="line">vmkfstools -z /vmfs/devices/disks/t10.ATA_____ST4000VX0152D3CU104__________________________________WW607DYE /vmfs/volumes/6449615b-232b02f8-41d2-309c23af5243/HDD2.vmdk &amp;&amp;</span><br><span class="line"></span><br><span class="line">vmkfstools -z /vmfs/devices/disks/t10.ATA_____ST4000VX0152D3CU104__________________________________WW607DVN /vmfs/volumes/6449615b-232b02f8-41d2-309c23af5243/HDD3.vmdk &amp;&amp;</span><br><span class="line">vmkfstools -z /vmfs/devices/disks/t10.ATA_____ST4000VX0152D3CU104__________________________________WW6083GG /vmfs/volumes/6449615b-232b02f8-41d2-309c23af5243/HDD4.vmdk &amp;&amp;</span><br><span class="line">vmkfstools -z /vmfs/devices/disks/t10.ATA_____ST4000VX0152D3CU104__________________________________WW606EX1 /vmfs/volumes/6449615b-232b02f8-41d2-309c23af5243/HDD5.vmdk</span><br><span class="line"></span><br></pre></td></tr></table></figure>





<h2 id="群晖里"><a href="#群晖里" class="headerlink" title="群晖里"></a>群晖里</h2><p>存储管理器-存储空间-创建存储池-选择raid模式</p>
<h1 id="ups自动关机"><a href="#ups自动关机" class="headerlink" title="ups自动关机"></a>ups自动关机</h1><h2 id="1-自动关机"><a href="#1-自动关机" class="headerlink" title="1.自动关机"></a>1.自动关机</h2><p><a target="_blank" rel="noopener" href="https://wp.gxnas.com/10572.html">https://wp.gxnas.com/10572.html</a></p>
<p>虚拟机添加usb设备，选择ups的usb，并在虚拟机中安装配套的ups软件，设置断电自动关机，比如10分钟。<br> 如果主板支持通电开机，ups虚拟机还需要设置自动启动，时间和顺序自行掌控。<br> 所有虚拟机尽量安装vmtools，调用系统的关机，而不是关闭电源。<br> 系统-自动启动，配置安装了vmtools的虚拟机，停止操作设置为关机，等待信号检测：是。</p>
<hr>
<p><strong>先简单了解一下几条命令：</strong></p>
<p>1、获取ESXI上的所有虚拟机VMID的值</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim-cmd vmsvc/getallvms</span><br></pre></td></tr></table></figure>

<p>2、把虚拟机正常关机</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim-cmd vmsvc/power.shutdown vmid的值</span><br></pre></td></tr></table></figure>

<p>3、把虚拟机强制关闭电源</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim-cmd vmsvc/power.off vmid的值</span><br></pre></td></tr></table></figure>

<hr>
<p><strong>开始干活：</strong></p>
<p>#进入ESXI的存储盘</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /vmfs/volumes/datastore1</span><br></pre></td></tr></table></figure>

<p>#建立ups文件夹</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir ups</span><br></pre></td></tr></table></figure>

<p>#进入ups文件夹</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd ups</span><br></pre></td></tr></table></figure>

<p>#编辑ups.sh文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi ups.sh</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">#以下为 ups.sh 的内容，请酌情修改。</span><br><span class="line">#其中：10.10.10.1 为主路由的IP，sleep 为稍等时间（秒），vmid的值请根据自己的实际情况修改。</span><br><span class="line">#示例：每分钟ping主路由的IP，如果ping不通的话（停电就断网了）5分钟后会再次检测。再次检测如依然不通，则ESXI依次关闭虚拟机后，宿主关机。</span><br><span class="line">#!/bin/sh</span><br><span class="line">while</span><br><span class="line">ping -c 1 10.10.10.1 &gt; /dev/null</span><br><span class="line">[ $? -eq 0 ];</span><br><span class="line">do</span><br><span class="line">    echo &#x27;AC Power OK !&#x27; &gt;&gt; /vmfs/volumes/datastore1/ups/ups.log;date &gt;&gt; /vmfs/volumes/datastore1/ups/ups.log</span><br><span class="line">    sleep 60</span><br><span class="line">done</span><br><span class="line">echo &#x27;AC Power maybe off, checking again after 5 minutes !&#x27; &gt;&gt; /vmfs/volumes/datastore1/ups/ups.log;date &gt;&gt; /vmfs/volumes/datastore1/ups/ups.log</span><br><span class="line">sleep 300</span><br><span class="line">ping -c 1 10.10.10.1 &gt; /dev/null</span><br><span class="line">if [ $? -eq 0 ]</span><br><span class="line">    then</span><br><span class="line">        echo &#x27;Checkagain, AC Power OK !&#x27; &gt;&gt; /vmfs/volumes/datastore1/ups/ups.log;date &gt;&gt; /vmfs/volumes/datastore1/ups/ups.log</span><br><span class="line">    else</span><br><span class="line">        echo &#x27;AC Power is already off, shut down Esxi Now!&#x27; &gt;&gt; /vmfs/volumes/datastore1/ups/ups.log;date &gt;&gt; /vmfs/volumes/datastore1/ups/ups.log</span><br><span class="line">        vim-cmd vmsvc/power.shutdown 11</span><br><span class="line">        sleep 60</span><br><span class="line">        vim-cmd vmsvc/power.shutdown 10</span><br><span class="line">        sleep 60</span><br><span class="line">        vim-cmd vmsvc/power.shutdown 6</span><br><span class="line">        sleep 60</span><br><span class="line">        vim-cmd vmsvc/power.shutdown 3</span><br><span class="line">        sleep 60</span><br><span class="line">        vim-cmd vmsvc/power.off 2</span><br><span class="line">        sleep 60</span><br><span class="line">        poweroff</span><br><span class="line">fi</span><br><span class="line">#ups.sh 的内容结束</span><br></pre></td></tr></table></figure>


<p> #编辑monitor.sh，守护ups.sh这个脚本正常运行 vi monitor.sh # monitor.sh 的内容开始</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">NUM=`ps -c | grep ups.sh | grep -v grep |wc -l`</span><br><span class="line">echo $&#123;NUM&#125;</span><br><span class="line">if [ &quot;$&#123;NUM&#125;&quot; -lt &quot;1&quot; ];then</span><br><span class="line">     /vmfs/volumes/datastore1/ups/ups.sh &amp;</span><br><span class="line">     echo &#x27;monitor start&#x27; &gt;&gt; /vmfs/volumes/datastore1/ups/ups.log;date &gt;&gt; /vmfs/volumes/datastore1/ups/ups.log</span><br><span class="line">fi</span><br><span class="line">exit 0</span><br><span class="line">#monitor.sh 的内容结束 </span><br></pre></td></tr></table></figure>
<p>#调整两个脚本的权限 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chmod 755 monitor.sh</span><br><span class="line">chmod 755 ups.sh </span><br></pre></td></tr></table></figure>
<p>#esxi重启后引导会自动恢复初始状态 需要添加一个每次启动自动写引导 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/rc.local.d/local.sh  </span><br></pre></td></tr></table></figure>
<p>#在exit之前添加以下cron代码，3分钟执行一次守护进程 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/bin/kill $(cat /var/run/crond.pid)</span><br><span class="line">/bin/echo &#x27;*/3 * * * * /vmfs/volumes/datastore1/ups/monitor.sh&#x27; &gt;&gt; /var/spool/cron/crontabs/root</span><br><span class="line">/usr/lib/vmware/busybox/bin/busybox crond </span><br></pre></td></tr></table></figure>
<p>#需要执行一次</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/sbin/auto-backup.sh</span><br></pre></td></tr></table></figure>
<p>命令，我们上面编辑的脚本才真正的保存 /sbin/auto-backup.sh</p>
<p><img src="/2023/04/26/Nas/image-20230502152007791.png" alt="image-20230502152007791"></p>
<p><a target="_blank" rel="noopener" href="http://t.csdn.cn/ezOwY">http://t.csdn.cn/ezOwY</a></p>
<h2 id="2-关机脚本"><a href="#2-关机脚本" class="headerlink" title="2.关机脚本"></a>2.关机脚本</h2><p>#!/bin/sh</p>
<p>#shutdown all VMs(2,3,9 is VMID,add your VMIDs here)<br>vim-cmd vmsvc/power.off 2<br>vim-cmd vmsvc/power.off 3<br>vim-cmd vmsvc/power.off 9</p>
<p>#Poweroff Host<br>/sbin/poweroff</p>
<p>脚本中的vim-cmd vmsvc/power.off 2是关机命令，将对指定的虚拟机VMID号发送关机命令，在宿主机关机前关闭所有虚拟机。<br>最后是关机命令。</p>
<p>poweroff就相当于直接拔插头，应该用power.shutdown</p>
<p>几个相关命令：<br>vim-cmd vmsvc/getallvms 查询所有已配置的虚拟机，可获得VMID<br>vim-cmd vmsvc/power.getstate VMID 通过VMID查询相应的虚拟机的当前状态（开关机）<br>vim-cmd vmsvc/power.shutdown VMID发送关机信号(命令），但操作系统未必会真正关机，所以可以接下面的命令。<br>vim-cmd vmsvc/power.off VMID 直接关机（相当于关电源）<br>————————————————<br>版权声明：本文为CSDN博主「快乐的命令行」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。<br>原文链接：<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_45229597/article/details/121120798">https://blog.csdn.net/qq_45229597/article/details/121120798</a></p>
<h1 id="ikuai-1"><a href="#ikuai-1" class="headerlink" title="ikuai"></a>ikuai</h1><h2 id="LAN设置"><a href="#LAN设置" class="headerlink" title="LAN设置"></a>LAN设置</h2><p><img src="/2023/04/26/Nas/image-20230501000251430.png" alt="image-20230501000251430"></p>
<p>==高级选上俩网口==</p>
<h2 id="修改ikuai控制台端口"><a href="#修改ikuai控制台端口" class="headerlink" title="修改ikuai控制台端口"></a>修改ikuai控制台端口</h2><p>ikuai 8881</p>
<p><img src="/2023/04/26/Nas/image-20230501000437137.png" alt="image-20230501000437137"></p>
<h2 id="端口映射-1"><a href="#端口映射-1" class="headerlink" title="端口映射"></a>端口映射</h2><p>esxi 443——9090，esxi只支持https，必须得用443端口</p>
<img src="/2023/04/26/Nas/image-20230501000220896.png" alt="image-20230501000220896" style="zoom:200%;">



<h1 id="群晖-1"><a href="#群晖-1" class="headerlink" title="群晖"></a>群晖</h1><h3 id="群晖NAS内网速度测试"><a href="#群晖NAS内网速度测试" class="headerlink" title="群晖NAS内网速度测试"></a>群晖NAS内网速度测试</h3><ol>
<li>SSH登录群晖NAS，并切换到管理员权限sudo -i</li>
<li>安装Diagnosis Tool，sudo synogear install</li>
<li>运行/var/packages/DiagnosisTool/target/tool/iperf3 -c 192.168.188.1</li>
</ol>
<h3 id="群晖NAS外网速度测试"><a href="#群晖NAS外网速度测试" class="headerlink" title="群晖NAS外网速度测试"></a>群晖NAS外网速度测试</h3><ul>
<li>运行：/var/packages/DiagnosisTool/target/tool/speedtest-cli.py</li>
<li>会在结果可以找到Download: 138.89 Mbit/s；Upload: 63.01 Mbit/s（这是我千兆移动的测试结果）</li>
</ul>
<p>如果不想使用synogear了， 一个命令就可移除：</p>
<p>作者：ITGeeker<br>链接：<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/e34384e25196">https://www.jianshu.com/p/e34384e25196</a><br>来源：简书<br>著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</p>
<h1 id="NAS-TOOL"><a href="#NAS-TOOL" class="headerlink" title="NAS-TOOL"></a>NAS-TOOL</h1><p>==<strong>所有文件夹修改权限！</strong>==</p>
<h2 id="群晖hosts配置"><a href="#群晖hosts配置" class="headerlink" title="群晖hosts配置"></a>群晖hosts配置</h2><p><code>sudo -i</code></p>
<p>``vi /etc/hosts`</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">13.225.89.239 api.thetvdb.com</span><br><span class="line"></span><br><span class="line">13.249.175.212 api.thetvdb.com</span><br><span class="line"></span><br><span class="line">13.35.161.120 api.thetvdb.com</span><br><span class="line"></span><br><span class="line">13.226.238.76 api.themoviedb.org</span><br><span class="line"></span><br><span class="line">13.35.7.102 api.themoviedb.org</span><br><span class="line"></span><br><span class="line">13.225.103.26 api.themoviedb.org</span><br><span class="line"></span><br><span class="line">13.226.191.85 api.themoviedb.org</span><br><span class="line"></span><br><span class="line">13.225.103.110 api.themoviedb.org</span><br><span class="line"></span><br><span class="line">52.85.79.89 api.themoviedb.org</span><br><span class="line"></span><br><span class="line">13.225.41.40 api.themoviedb.org</span><br><span class="line"></span><br><span class="line">14.226.251.88 api.themoviedb.org</span><br></pre></td></tr></table></figure>







<h2 id="1-bt版本nastool"><a href="#1-bt版本nastool" class="headerlink" title="1.bt版本nastool"></a>1.bt版本nastool</h2><p>ip:3000</p>
<img src="/2023/04/26/Nas/image-20230430234544318.png" alt="image-20230430234544318" style="zoom:200%;">

<p>高级-</p>
<p><img src="/2023/04/26/Nas/image-20230430234612203.png" alt="image-20230430234612203"></p>
<p>uid/gid通过ssh，bash输入id获取</p>
<p><img src="/2023/04/26/Nas/image-20230430234636316.png" alt="image-20230430234636316"></p>
<p><img src="/2023/04/26/Nas/image-20230430234647301.png" alt="image-20230430234647301"></p>
<p><img src="/2023/04/26/Nas/image-20230430234654707.png" alt="image-20230430234654707"></p>
<h2 id="2-TMDB-API"><a href="#2-TMDB-API" class="headerlink" title="2.TMDB API"></a>2.TMDB API</h2><p><a target="_blank" rel="noopener" href="https://www.themoviedb.org/settings/api">https://www.themoviedb.org/settings/api</a></p>
<p>api</p>
<h2 id="3-Transmission"><a href="#3-Transmission" class="headerlink" title="3.Transmission"></a>3.Transmission</h2><p><img src="/2023/04/26/Nas/image-20230430235039505.png" alt="image-20230430235039505"></p>
<p><img src="/2023/04/26/Nas/image-20230430235059741.png"></p>
<h2 id="4-chinesesubfinder字幕"><a href="#4-chinesesubfinder字幕" class="headerlink" title="4.chinesesubfinder字幕"></a>4.chinesesubfinder字幕</h2><p>IP:19035</p>
<p>用户名admin</p>
<p><img src="/2023/04/26/Nas/image-20230430234710623.png" alt="image-20230430234710623"></p>
<p><img src="/2023/04/26/Nas/image-20230430234717306.png" alt="image-20230430234717306"></p>
<p><img src="/2023/04/26/Nas/image-20230430234729513.png" alt="image-20230430234729513"></p>
<p><img src="/2023/04/26/Nas/image-20230430234738546.png" alt="image-20230430234738546"></p>
<h2 id="矿神软件包"><a href="#矿神软件包" class="headerlink" title="矿神软件包"></a>矿神软件包</h2><p><img src="/2023/04/26/Nas/image-20230501002206137.png" alt="image-20230501002206137"></p>
<p><a target="_blank" rel="noopener" href="https://spk7.imnks.com/">https://spk7.imnks.com/</a></p>
<p>社群下载</p>
<p><img src="/2023/04/26/Nas/image-20230501002245641.png" alt="image-20230501002245641"></p>
<h4 id="jellyfin"><a href="#jellyfin" class="headerlink" title="jellyfin"></a>jellyfin</h4><p>ip:8096</p>
<h2 id="jackett"><a href="#jackett" class="headerlink" title="jackett"></a>jackett</h2><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/511104984">https://zhuanlan.zhihu.com/p/511104984</a></p>
<p>==限制性能==</p>
<p><img src="/2023/04/26/Nas/image-20230501003002339.png" alt="image-20230501003002339"></p>
<p>高级加上uid，gid</p>
<p><img src="/2023/04/26/Nas/image-20230501003028600.png" alt="image-20230501003028600"></p>
<p><img src="/2023/04/26/Nas/image-20230501002954192.png" alt="image-20230501002954192"></p>
<p>加一个映射，radarr？</p>
<p><img src="/2023/04/26/Nas/image-20230501002946885.png" alt="image-20230501002946885"></p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1dv4y1b78H/?vd_source=3d040baeb67aeceb2bba9c7169a67a96">https://www.bilibili.com/video/BV1dv4y1b78H/?vd_source=3d040baeb67aeceb2bba9c7169a67a96</a></p>
<h1 id="clash"><a href="#clash" class="headerlink" title="clash"></a>clash</h1><h3 id="要是命令行使用需要export一下"><a href="#要是命令行使用需要export一下" class="headerlink" title="要是命令行使用需要export一下"></a>要是命令行使用需要export一下</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export http_proxy=http://proxy-server:port</span><br><span class="line">export https_proxy=http://proxy-server:port</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export http_proxy=http://127.0.0.1:7890</span><br><span class="line">export https_proxy=http://127.0.0.1:78901</span><br></pre></td></tr></table></figure>



<p>测试</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -I --proxy http://proxy-server:port http://www.example.com</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -I --proxy http://127.0.0.1:7890 http://www.google.com.hk</span><br></pre></td></tr></table></figure>



<h3 id="准备Clash配置文件"><a href="#准备Clash配置文件" class="headerlink" title="准备Clash配置文件"></a>准备Clash配置文件</h3><p><a target="_blank" rel="noopener" href="https://fugary.com/?p=363">https://fugary.com/?p=363</a></p>
<p>新增一个<code>config.yaml</code>文件，需要上传到群晖的<code>/docker/clash/config.yaml</code>，这个<code>yaml</code>文件可以从本地电脑的<code>Clash</code>中复制出来：</p>
<p><img src="/2023/04/26/Nas/image-20220703164622625.png" alt="image-20220703164622625"></p>
<p>**注意：这里只能用<code>config.yaml不</code>能用<code>config.yml</code>**，可以适当修改部分信息，也可以不修改：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># Port of HTTP(S) proxy server on the local end（默认）</span></span><br><span class="line"></span><br><span class="line"><span class="attr">port:</span> <span class="number">7890</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Port of SOCKS5 proxy server on the local end（默认）</span></span><br><span class="line"></span><br><span class="line"><span class="attr">socks-port:</span> <span class="number">7891</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 开启局域网代理，这个要配置true</span></span><br><span class="line"></span><br><span class="line"><span class="attr">allow-lan:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#UI监听端口，可以改成0.0.0.0:9090，改后可以通过ui界面访问</span></span><br><span class="line"></span><br><span class="line"><span class="attr">external-controller:</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span><span class="string">:9090</span></span><br></pre></td></tr></table></figure>

<p>配置文件准备好，上传到群晖之后，就可以开始了。</p>
<h3 id="Docker安装Clash镜像"><a href="#Docker安装Clash镜像" class="headerlink" title="Docker安装Clash镜像"></a>Docker安装Clash镜像</h3><p>进入群晖<code>Docker</code>套件，搜素<code>clash</code>，可以看到<code>dreamacro/clash</code>，双击下载下来。</p>
<p><img src="/2023/04/26/Nas/image-20220703140044584.png" alt="image-20220703140044584"></p>
<p>对应开源地址：</p>
<p>GitHub地址：<a target="_blank" rel="noopener" href="https://github.com/Dreamacro/clash">https://github.com/Dreamacro/clash</a><br> Docker地址：<a target="_blank" rel="noopener" href="https://registry.hub.docker.com/r/dreamacro/clash/">https://registry.hub.docker.com/r/dreamacro/clash/</a></p>
<p>参考配置文件：<a target="_blank" rel="noopener" href="https://github.com/Dreamacro/clash/wiki/configuration">https://github.com/Dreamacro/clash/wiki/configuration</a></p>
<h3 id="配置Clash容器"><a href="#配置Clash容器" class="headerlink" title="配置Clash容器"></a>配置Clash容器</h3><p>找到刚才下载的镜像，现在可以开始配置<code>Clash</code>容器了，点击【启动】，再下一步：</p>
<p><img src="/2023/04/26/Nas/image-20220703142612130.png" alt="image-20220703142612130"></p>
<p>配置端口，目前开放的端口最好映射出来，根据实际情况配置本地端口，容器端口是固定的，如果是<code>mixed-port: 7890</code>，可以少暴露端口：</p>
<p><img src="/2023/04/26/Nas/image-20220703143036183.png" alt="image-20220703143036183"></p>
<p>然后映射配置文件，本地配置文件<code>/docker/clash/config.yaml</code>映射到容器的<code>/root/.config/clash/config.yaml</code></p>
<p><img src="/2023/04/26/Nas/image-20220703143230426.png" alt="image-20220703143230426"></p>
<p>配置完成可以启动了。</p>
<p>其实<code>clash</code>代理已经可以使用了，不过为了方便查看，可以再用<code>UI</code>工具查看一下。</p>
<h3 id="使用UI界面"><a href="#使用UI界面" class="headerlink" title="使用UI界面"></a>使用UI界面</h3><p>在线版<code>UI</code>界面：<a target="_blank" rel="noopener" href="http://yacd.haishan.me/">http://yacd.haishan.me/</a> （目前似乎有兼容问题）</p>
<p>输入对应的地址即可，比如本地的：<code>http://192.168.31.126:9090</code></p>
<p>也可以自己安装一个<code>UI</code>容器，名字叫：haishanh/yacd，搜索后下载安装</p>
<p><img src="/2023/04/26/Nas/image-20220703165059849.png" alt="image-20220703165059849"></p>
<p>下载后，进入启动配置，配置自动重新启动：</p>
<p><img src="/2023/04/26/Nas/image-20220703165339662.png" alt="image-20220703165339662"></p>
<p>配置端口：</p>
<p><img src="/2023/04/26/Nas/image-20220703165555219.png" alt="image-20220703165555219"></p>
<p>启动完毕。</p>
<p>访问：<a target="_blank" rel="noopener" href="http://192.168.31.126:9080/">http://192.168.31.126:9080/</a> 添加clash服务的地址</p>
<p><img src="/2023/04/26/Nas/image-20220703170428513.png" alt="image-20220703170428513"></p>
<p>进入之后可以看到clash的订阅信息了：</p>
<p><img src="/2023/04/26/Nas/image-20220703170538462.png" alt="image-20220703170538462"></p>
<p><code>UI</code>安装配置完成。</p>
<h3 id="代理使用"><a href="#代理使用" class="headerlink" title="代理使用"></a>代理使用</h3><p>以<code>iOS</code>手机为例，在【无线局域网】设置中，已连接的<code>WIFI</code>右边的信息图标：</p>
<p>配置<code>HTTP</code>代理：</p>
<p><img src="/2023/04/26/Nas/image-20220703170819896.png" alt="image-20220703170819896"></p>
<p>然后就可以尝试访问<a target="_blank" rel="noopener" href="https://google.com测试一下了./">https://google.com测试一下了。</a></p>
<h3 id="自动更新"><a href="#自动更新" class="headerlink" title="自动更新"></a>自动更新</h3><p>目前这种操作方式不能自动更新代理，可以考虑使用定时任务来更新，编写定时任务脚本，并存放到<code>/docker/clash/reload-clash.sh</code>：</p>
<p><strong>注意：如果订阅地址用浏览器打开不是<code>yml</code>格式，不能使用这个方法，可以尝试在<code>url</code>后面增加参数：<code>?target=clash</code>或者<code>clash=1</code>之类的看看是否能转换出<code>yml</code>数据。</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># 下载节点配置文件，根据实际的订阅地址填写</span></span><br><span class="line"></span><br><span class="line">wget -O /volume1/docker/clash/config.yaml https://xxxxxx</span><br><span class="line"></span><br><span class="line"><span class="comment"># external-controller地址为0.0.0.0:9090，方便UI访问（可选）</span></span><br><span class="line"></span><br><span class="line">sed -i <span class="string">&#x27;s/127.0.0.1:9090/0.0.0.0:9090/g&#x27;</span> /volume1/docker/clash/config.yaml</span><br><span class="line"></span><br><span class="line"><span class="comment"># 增加安全性，配置使用代理的用户名和密码（可选）</span></span><br><span class="line"></span><br><span class="line">sed -i <span class="string">&#x27;s/allow-lan: true/allow-lan: true\r\nauthentication:\r\n - &quot;user1:password1&quot;\r\n - &quot;user2:password2&quot;/g&#x27;</span> /volume1/docker/clash/config.yaml</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重启 clash 容器，名字为实际的容器名字</span></span><br><span class="line"></span><br><span class="line">docker container restart dreamarco-clash1</span><br></pre></td></tr></table></figure>

<p>配置群晖定时任务，进入【控制面板】-&gt;【任务计划】：</p>
<p><img src="/2023/04/26/Nas/image-20220703175703733.png" alt="image-20220703175703733"></p>
<p>然后新增一个任务，【用户定义的脚本】任务，并配置名称等</p>
<p><img src="/2023/04/26/Nas/chrome_NvhlmHcwVn.png" alt="chrome_NvhlmHcwVn"></p>
<p>配置运行频率：</p>
<p><img src="/2023/04/26/Nas/image-20220704085518944.png" alt="image-20220704085518944"></p>
<p>配置运行脚本<code>bash /volume1/docker/clash/reload-clash.sh</code>：</p>
<p><img src="/2023/04/26/Nas/chrome_MLTqofS0wr.png" alt="chrome_MLTqofS0wr"></p>
<p><strong>需要注意路径，完整路径是要包含<code>/volume1</code>的</strong></p>
<p>可以先运行一次测试看看。</p>
<p>至此算是完全配置完成了。</p>
<h4 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h4><p>运行脚本提示没有权限运行docker：</p>
<blockquote>
<p>Got permission denied while trying to connect to the Docker daemon socket at unix:///var/run/docker.sock: Post “http://%2Fvar%2Frun%2Fdocker.sock/v1.24/containers/dreamacro-clash1/restart”: dial unix /var/run/docker.sock: connect: permission denied</p>
</blockquote>
<p>可以尝试把脚本修改一下，把<code>sudo</code>需要的密码放进去：</p>
<p><code>sudo -S</code>是表示<code>sudo</code>从标准输入<code>STDIN</code>读入密码而不是从终端读取。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;YourPWD&quot;</span> | sudo -S docker container restart dreamarco-clash1</span><br></pre></td></tr></table></figure>

<h4 id="新自动刷新"><a href="#新自动刷新" class="headerlink" title="新自动刷新"></a>新自动刷新</h4><p>运行发现，重启<code>Docker</code>方式刷新并不是很好，参考了<code>API</code>文档，发现可以用另外的方式更新：</p>
<p><a target="_blank" rel="noopener" href="https://clash.gitbook.io/doc/restful-api/config">https://clash.gitbook.io/doc/restful-api/config</a></p>
<p>文件路径：<code>/docker/clash/reload-clash.sh</code></p>
<p>实际配置到【任务计划】中需要全路径<code>bash /volume1/docker/clash/reload-clash.sh</code>：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># 下载节点配置文件，根据实际的订阅地址填写</span></span><br><span class="line"></span><br><span class="line">wget -O /volume1/docker/clash/config.yaml https://xxxxxx</span><br><span class="line"></span><br><span class="line"><span class="comment"># external-controller地址为0.0.0.0:9090，方便UI访问（可选）</span></span><br><span class="line"></span><br><span class="line">sed -i <span class="string">&#x27;s/127.0.0.1:9090/0.0.0.0:9090/g&#x27;</span> /volume1/docker/clash/config.yaml</span><br><span class="line"></span><br><span class="line"><span class="comment"># 增加安全性，配置使用代理的用户名和密码（可选）</span></span><br><span class="line"></span><br><span class="line">sed -i <span class="string">&#x27;s/allow-lan: true/allow-lan: true\r\nauthentication:\r\n - &quot;user1:password1&quot;\r\n - &quot;user2:password2&quot;/g&#x27;</span> /volume1/docker/clash/config.yaml</span><br><span class="line"></span><br><span class="line"><span class="comment"># 去掉重启Docker，调用API刷新：</span></span><br><span class="line"></span><br><span class="line">curl --location --request PUT <span class="string">&#x27;http://localhost:9090/configs&#x27;</span> \</span><br><span class="line"></span><br><span class="line">--header <span class="string">&#x27;Content-Type: application/json&#x27;</span> \</span><br><span class="line"></span><br><span class="line">--data-raw <span class="string">&#x27;&#123;&quot;path&quot;: &quot;/root/.config/clash/config.yaml&quot;&#125;&#x27;</span></span><br></pre></td></tr></table></figure>

<p><strong>注意：代理端口不要使用默认的7890，暴露外网可能会被扫描到，出现流量偷跑的情况，另外UI界面并不需要，可以测试完后停止UI相关容器</strong></p>
<h1 id="webdav挂载阿里云盘"><a href="#webdav挂载阿里云盘" class="headerlink" title="webdav挂载阿里云盘"></a>webdav挂载阿里云盘</h1><p><a target="_blank" rel="noopener" href="https://imnks.com/3939.html">https://imnks.com/3939.html</a></p>
<p>矿神SPK源内安装</p>
<p><a target="_blank" rel="noopener" href="https://imnks.com/1780.html">矿神群晖SPK套件中心 上线啦！支持DSM6、DSM7</a></p>
<p>矿神群晖SPK套件中心 提供各类国内常用的DSM6、DSM7套件，目前上架DSM7套件：Aria2、ffmpeg、Jellyfin、qBittorrent、Syncthing、Transmission等等，持续更….</p>
<h3 id="套件截图"><a href="#套件截图" class="headerlink" title="套件截图"></a>套件截图</h3><p><img src="/2023/04/26/Nas/1390102933.png!1" alt="1390102933.png"></p>
<h3 id="安装界面"><a href="#安装界面" class="headerlink" title="安装界面"></a>安装界面</h3><p>端口和Webdav登录的用户名密码可以自定义（非登录群晖的，随便搞个！注意密码不要带特殊符号！！！）</p>
<p>注意端口9080一般不建议修改，但是更不要和系统的其它套件端口冲突！</p>
<p><img src="/2023/04/26/Nas/2082164222.png!1" alt="2082164222.png"></p>
<h3 id="获取refresh-token-（和AList的不通用！！！）"><a href="#获取refresh-token-（和AList的不通用！！！）" class="headerlink" title="获取refresh_token （和AList的不通用！！！）"></a>获取refresh_token （和AList的不通用！！！）</h3><h4 id="使用中如果连不上，重新获取refresh-token，UI界面修改后保存即可，套件会自动重启。"><a href="#使用中如果连不上，重新获取refresh-token，UI界面修改后保存即可，套件会自动重启。" class="headerlink" title="使用中如果连不上，重新获取refresh_token，UI界面修改后保存即可，套件会自动重启。"></a>使用中如果连不上，重新获取refresh_token，UI界面修改后保存即可，套件会自动重启。</h4><h6 id="2023-3-7更新V2-切换到阿里云盘开放平台接口，refreshToken需要重新获取！！！"><a href="#2023-3-7更新V2-切换到阿里云盘开放平台接口，refreshToken需要重新获取！！！" class="headerlink" title="2023.3.7更新V2: 切换到阿里云盘开放平台接口，refreshToken需要重新获取！！！"></a>2023.3.7更新V2: 切换到阿里云盘开放平台接口，refreshToken需要重新获取！！！</h6><h6 id="2023-3-7更新V2-切换到阿里云盘开放平台接口，refreshToken需要重新获取！！！-1"><a href="#2023-3-7更新V2-切换到阿里云盘开放平台接口，refreshToken需要重新获取！！！-1" class="headerlink" title="2023.3.7更新V2: 切换到阿里云盘开放平台接口，refreshToken需要重新获取！！！"></a>2023.3.7更新V2: 切换到阿里云盘开放平台接口，refreshToken需要重新获取！！！</h6><h6 id="2023-3-7更新V2-切换到阿里云盘开放平台接口，refreshToken需要重新获取！！！-2"><a href="#2023-3-7更新V2-切换到阿里云盘开放平台接口，refreshToken需要重新获取！！！-2" class="headerlink" title="2023.3.7更新V2: 切换到阿里云盘开放平台接口，refreshToken需要重新获取！！！"></a>2023.3.7更新V2: 切换到阿里云盘开放平台接口，refreshToken需要重新获取！！！</h6><h5 id="方法1：网页扫码获取"><a href="#方法1：网页扫码获取" class="headerlink" title="方法1：网页扫码获取"></a>方法1：网页扫码获取</h5><p>访问专用的扫码：<a target="_blank" rel="noopener" href="https://imnks.com/go/aHR0cHM6Ly9tZXNzZW5zZS1hbGl5dW5kcml2ZS13ZWJkYXYtYmFja2VuZHJlZnJlc2gtdG9rZW4tdWNzMHduLnN0cmVhbWxpdC5hcHAv">https://messense-aliyundrive-webdav-backendrefresh-token-ucs0wn.streamlit.app/</a></p>
<h5 id="方法2：ssh扫码获取"><a href="#方法2：ssh扫码获取" class="headerlink" title="方法2：ssh扫码获取"></a>方法2：ssh扫码获取</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/var/packages/aliyundrive-webdav/target/bin/aliyundrive-webdav qr login</span><br></pre></td></tr></table></figure>

<p><img src="/2023/04/26/Nas/4157882280.png!1" alt="4157882280.png"></p>
<p> （已屏蔽旧内容）</p>
<h3 id="FileStation挂载文件夹"><a href="#FileStation挂载文件夹" class="headerlink" title="FileStation挂载文件夹"></a>FileStation挂载文件夹</h3><h5 id="列表默认过期时间是10分钟，意思阿里云盘上改动后最多要10分钟套件才会刷新。"><a href="#列表默认过期时间是10分钟，意思阿里云盘上改动后最多要10分钟套件才会刷新。" class="headerlink" title="列表默认过期时间是10分钟，意思阿里云盘上改动后最多要10分钟套件才会刷新。"></a>列表默认过期时间是10分钟，意思阿里云盘上改动后最多要10分钟套件才会刷新。</h5><p><img src="/2023/04/26/Nas/2364865078.png!1" alt="2364865078.png"></p>
<p><img src="/2023/04/26/Nas/1027107723.png!1" alt="1027107723.png"></p>
<p>127.0.0.1指NAS本身，如图就填这个！</p>
<p><img src="/2023/04/26/Nas/2349678443.png!1" alt="2349678443.png"></p>
<p><img src="/2023/04/26/Nas/1323421312.png!1" alt="1323421312.png"></p>
<h3 id="CloudSync同步阿里云盘，支持双向单向-V2已测试恢复支持加密同步"><a href="#CloudSync同步阿里云盘，支持双向单向-V2已测试恢复支持加密同步" class="headerlink" title="CloudSync同步阿里云盘，支持双向单向(V2已测试恢复支持加密同步)"></a>CloudSync同步阿里云盘，支持双向单向(V2已测试恢复支持加密同步)</h3><h5 id="列表默认过期时间是10分钟，意思阿里云盘上改动后最多要10分钟套件才会刷新。-1"><a href="#列表默认过期时间是10分钟，意思阿里云盘上改动后最多要10分钟套件才会刷新。-1" class="headerlink" title="列表默认过期时间是10分钟，意思阿里云盘上改动后最多要10分钟套件才会刷新。"></a>列表默认过期时间是10分钟，意思阿里云盘上改动后最多要10分钟套件才会刷新。</h5><p><img src="/2023/04/26/Nas/4201491998.png!1" alt="4201491998.png"></p>
<p><img src="/2023/04/26/Nas/745550632.png!1" alt="745550632.png"></p>
<p><img src="/2023/04/26/Nas/2651402882.png!1" alt="2651402882.png"></p>
<p><img src="/2023/04/26/Nas/3029018314.png!1" alt="3029018314.png"></p>
<h2 id="端口9080"><a href="#端口9080" class="headerlink" title="端口9080"></a>端口9080</h2><h2 id="网盘搜索：奈斯搜索"><a href="#网盘搜索：奈斯搜索" class="headerlink" title="网盘搜索：奈斯搜索"></a>网盘搜索：奈斯搜索</h2><h1 id="ikuai-MAC地址"><a href="#ikuai-MAC地址" class="headerlink" title="ikuai MAC地址"></a>ikuai MAC地址</h1><p>  <strong>==00:0C:29:10:F4:8A==</strong></p>
<h1 id="ipv6-DDNS-群晖反向代理"><a href="#ipv6-DDNS-群晖反向代理" class="headerlink" title="ipv6+DDNS+群晖反向代理"></a>ipv6+DDNS+群晖反向代理</h1><p>网络结构：光猫拨号——AP（小米ax6s）——ikuai——群晖</p>
<p>相当于光猫直接接ikuai，才能把ipv6前缀发给ikuai</p>
<p>然后在ikuai上做ikuai本机的ddns</p>
<p><img src="/2023/04/26/Nas/image-20230513134922842.png" alt="image-20230513134922842"></p>
<p>然后做群晖的ddns</p>
<p>参考<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/626478402?utm_id=0">https://zhuanlan.zhihu.com/p/626478402?utm_id=0</a></p>
<h3 id="本文通过DDNS-GO实现ipv6地址动态解析，并通过反向代理使docker容器服务能够通过独立ip在外放进行访问如"><a href="#本文通过DDNS-GO实现ipv6地址动态解析，并通过反向代理使docker容器服务能够通过独立ip在外放进行访问如" class="headerlink" title="本文通过DDNS-GO实现ipv6地址动态解析，并通过反向代理使docker容器服务能够通过独立ip在外放进行访问如"></a>本文通过DDNS-GO实现ipv6地址动态解析，并通过反向代理使docker容器服务能够通过独立ip在外放进行访问如</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gitlab.yourdomain.cn 直接访问内网中的gitlab服务</span><br><span class="line">jellyfin.yourdomain.cn 直接访问内网中的jellyfin服务</span><br></pre></td></tr></table></figure>

<h3 id="一：-前置条件"><a href="#一：-前置条件" class="headerlink" title="一： 前置条件"></a>一： 前置条件</h3><ul>
<li>群晖具备公网ipv6地址</li>
</ul>
<p>ipv6由上级路由器拨号并下发地址，具体实现此文不做描述</p>
<p><img src="/2023/04/26/Nas/v2-d6e28faa03c13671eb6011094312bf3b_720w.webp" alt="img"></p>
<ul>
<li>已有阿里云DDNS子账号AccessToken</li>
</ul>
<p>步骤可参考 <a href="https://link.zhihu.com/?target=https://blog.csdn.net/qq_42628989/article/details/124845455">网友方案</a></p>
<h3 id="二：-DDNS解析域名"><a href="#二：-DDNS解析域名" class="headerlink" title="二： DDNS解析域名"></a>二： DDNS解析域名</h3><h3 id="1-安装DDNS-GO容器"><a href="#1-安装DDNS-GO容器" class="headerlink" title="1. 安装DDNS-GO容器"></a>1. 安装DDNS-GO容器</h3><p><img src="/2023/04/26/Nas/v2-8898004e58acf6cb7b809d72945495a0_720w.webp" alt="img"></p>
<p>创建镜像时只需要新建一个<strong>ddns-go</strong>的文件夹映射到**/root**路径就行</p>
<p><img src="/2023/04/26/Nas/v2-c020379325d603a437944f03096efc7f_720w.webp" alt="img"></p>
<h3 id="2-启动并配置DDNS-GO"><a href="#2-启动并配置DDNS-GO" class="headerlink" title="2. 启动并配置DDNS-GO"></a>2. 启动并配置DDNS-GO</h3><p>创建完镜像后运行，浏览器中输入 http://“NAS的本地IP”:9876/ 即可访问</p>
<p><img src="/2023/04/26/Nas/v2-ea7ee00bfa56429824dcadfae2ed06ab_720w.webp" alt="img"></p>
<h3 id="3-配置ipv6映射"><a href="#3-配置ipv6映射" class="headerlink" title="3. 配置ipv6映射"></a>3. 配置ipv6映射</h3><p><img src="/2023/04/26/Nas/v2-8e3bc8b37db8e89c9fbfb856d27576e8_720w.webp" alt="img"></p>
<p>由于我这边ipv4虽然是公网但是80端口被ban，只需要开启ipv6即可，在下方domains中填入各个二级域名，一行一个</p>
<h3 id="4-验证解析是否成功"><a href="#4-验证解析是否成功" class="headerlink" title="4. 验证解析是否成功"></a>4. 验证解析是否成功</h3><p>这边可以看DDNS-GO日志，也可以直接去阿里云DNS解析的地方看</p>
<p><img src="/2023/04/26/Nas/v2-0153025c02eb93bcf933f3e3990b28da_720w.webp" alt="img"></p>
<p><img src="/2023/04/26/Nas/v2-98a6739b4fbc1ff0b0f5f95cba9d9a37_720w.webp" alt="img"></p>
<p>然后输入其中一个域名，此时所有域名都应该会打到群晖服务器上，然后重定向到5000去登录</p>
<p><img src="/2023/04/26/Nas/v2-9898195a79a37dc8412430901f281705_720w.webp" alt="img"></p>
<p>注意验证外网是否也能正常访问，可以用手机开移动流量试一下，ipv6解析可能会慢一点，要稍等一会</p>
<h3 id="三-反向代理"><a href="#三-反向代理" class="headerlink" title="三: 反向代理"></a>三: 反向代理</h3><p>反向代理即通过nginx实现代理服务，目前各个二级域名均打到群晖服务器，需要反向代理将来自不同域名的请求再转发到各个docker服务上去，这个过程用群晖自带的反向代理工具就可以实现</p>
<p><img src="/2023/04/26/Nas/v2-29db1a969008f010e12163c0ac3da7c7_720w.webp" alt="img"></p>
<p>下面以jellyfin为例，配置其中一条反向代理规则,其中主机名为各服务二级域名，目的地为docker服务地址及端口</p>
<p><img src="/2023/04/26/Nas/v2-aacf4aace6f453ecc1e553b7c3615ec0_720w.webp" alt="img"></p>
<p>此时保存并访问，可以发现服务还是会重定向到登录页，这是因为群晖代理默认会把80重定向http登录端口5000，443打到https登录，那么此时我们需要修改这个逻辑，并保证反向代理服务器能够正常去转发80端口的请求。</p>
<h3 id="四-禁用群晖默认重定向"><a href="#四-禁用群晖默认重定向" class="headerlink" title="四: 禁用群晖默认重定向"></a>四: 禁用群晖默认重定向</h3><p>实现这个能力需要修改<strong>server.mustache DSM.mustache</strong> 和 <strong>WWWService.mustache</strong> 这三个文件，将其中的80修改为88，443修改为4430，下面为详细步骤</p>
<h3 id="1-开启群晖ssh"><a href="#1-开启群晖ssh" class="headerlink" title="1. 开启群晖ssh"></a>1. 开启群晖ssh</h3><p><img src="/2023/04/26/Nas/v2-fcd08f5c4dced01774ba1a49c7f8163c_720w.webp" alt="img"></p>
<h3 id="2-Xshell修改文件"><a href="#2-Xshell修改文件" class="headerlink" title="2. Xshell修改文件"></a>2. Xshell修改文件</h3><p>文件均在/usr/syno/share/nginx下, 我们先在上级目录备份一下</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo tar -czvf nginx_config.tar.gz nginx</span><br></pre></td></tr></table></figure>

<p><img src="/2023/04/26/Nas/v2-f23084583d23836f63a0b11a2f80f571_720w.webp" alt="img"></p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd nginx</span><br><span class="line">sudo vim 文件一个一个来</span><br></pre></td></tr></table></figure>

<p>然后就是替换其中的80和443端口</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">:%s/80/88/g</span><br><span class="line">:%s/443/4430/g</span><br><span class="line">:wq</span><br></pre></td></tr></table></figure>

<p>如上即可实现文件内的全局替换，检查下没问题就可以保存了</p>
<p><img src="/2023/04/26/Nas/v2-b8ae7bf7270ebe14b17f1ad2b0ada258_720w.webp" alt="img"></p>
<p>全都改完后重启群晖网络服务即可</p>
<h3 id="完毕"><a href="#完毕" class="headerlink" title="完毕!"></a>完毕!</h3><h3 id="远程访问jellyfin、nplayer"><a href="#远程访问jellyfin、nplayer" class="headerlink" title="远程访问jellyfin、nplayer"></a>远程访问jellyfin、nplayer</h3><p>infuse不支持ipv6</p>
<h3 id="阿里云盘同步"><a href="#阿里云盘同步" class="headerlink" title="阿里云盘同步"></a>阿里云盘同步</h3><p>1.用阿里云webdav套件先把盘挂载到群晖</p>
<p>2.cloud sync webdav同步</p>
<p><img src="/2023/04/26/Nas/image-20230513152937903.png" alt="image-20230513152937903"><img src="/2023/04/26/Nas/image-20230513152953594.png" alt="image-20230513152953594"></p>
<h1 id="小米AX6S刷机"><a href="#小米AX6S刷机" class="headerlink" title="小米AX6S刷机"></a>小米AX6S刷机</h1><h3 id="为什么刷机："><a href="#为什么刷机：" class="headerlink" title="为什么刷机："></a>为什么刷机：</h3><p>原有的光猫拨号——小米AP——ikuai——nas模式下，可能443/80端口被AP拦截了，于是刷机改用openwrt拨号，并使用动态DNS、Socat实现相应功能</p>
<h3 id="简要流程"><a href="#简要流程" class="headerlink" title="简要流程"></a>简要流程</h3><p>1.刷1.2.7固件，然后计算root密码，在这一级打开ssh，命令：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvram set ssh_en=1 &amp;&amp; nvram set uart_en=1 &amp;&amp; nvram set  boot_wait=on &amp;&amp; nvram set bootdelay=3 &amp;&amp; nvram set  flag_try_sys1_failed=0 &amp;&amp; nvram set flag_try_sys2_failed=1 nvram set flag_boot_rootfs=0 &amp;&amp; nvram set &quot;boot_fw1=run boot_rd_img;bootm&quot; nvram set flag_boot_success=1 &amp;&amp; nvram commit &amp;&amp; /etc/init.d/dropbear enable &amp;&amp; /etc/init.d/dropbear start</span><br></pre></td></tr></table></figure>

<p>2.刷factory底包，ssh进去，将factory.bin上传到tmp文件夹</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mtd -r write /tmp/factory.bin firmware</span><br></pre></td></tr></table></figure>

<p>3.刷目标固件</p>
<p>底包登录openwrt，然后选择刷固件不保留配置</p>
<h3 id="刷机："><a href="#刷机：" class="headerlink" title="刷机："></a>刷机：</h3><p>转换SN码和root密码</p>
<p><a target="_blank" rel="noopener" href="https://miwifi.dev/ssh">https://miwifi.dev/ssh</a></p>
<h3 id="273大神固件"><a href="#273大神固件" class="headerlink" title="273大神固件"></a>273大神固件</h3><p><a target="_blank" rel="noopener" href="https://www.right.com.cn/forum/thread-8187405-1-1.html">https://www.right.com.cn/forum/thread-8187405-1-1.html</a></p>
<p>机器马上出掉，更新最后一版固件，同步上游硬件加速驱动。建议连续刷入两次升级包，避免出现断电掉配置，</p>
<p>2-2 同步上游坏块管理驱动,修复wifi上传速度限速70M的bug。pppoe不自动重拨的可在pppoe高级设置里设置lcp为5。</p>
<p> 闭源无线版本换用mtk SDK提供的有线和硬件加速驱动无线支持whnat，5g下行测速900+时cpu占用同样为个位数。mtk sdk的驱动稳定性应该会比op开源的好点，只是会比开源的多占用30多M内存。<br> sdk驱动版固件源码地址 <a target="_blank" rel="noopener" href="https://github.com/padavanonly/immortalwrtARM">https://github.com/padavanonly/immortalwrtARM</a> 自己编译的话不要开启op自己的flow offload，否则冲突。<br> mtk sdk源码：<a target="_blank" rel="noopener" href="https://git01.mediatek.com/plugins/gitiles/openwrt/feeds/mtk-openwrt-feeds/">https://git01.mediatek.com/plugi … /mtk-openwrt-feeds/</a></p>
<p> 刷入教程：<br> 0.<a target="_blank" rel="noopener" href="https://www.right.com.cn/forum/thread-8173581-1-1.html">https://www.right.com.cn/forum/thread-8173581-1-1.html</a> 官方固件下刷入这个帖子的1.2.7固件<br> 1.<a target="_blank" rel="noopener" href="https://www.oxygen7.cn/miwifi/">https://www.oxygen7.cn/miwifi/</a> 这个网站输入SN码，算出自己的密码<br> 2.telnet连接路由器，用户名root，密码是上面算出来的密码，执行以下命令</p>
<p>nvram set ssh_en=1 &amp;&amp; nvram set uart_en=1 &amp;&amp; nvram set  boot_wait=on &amp;&amp; nvram set bootdelay=3 &amp;&amp; nvram set  flag_try_sys1_failed=0 &amp;&amp; nvram set flag_try_sys2_failed=1 </p>
<p>nvram set flag_boot_rootfs=0 &amp;&amp; nvram set “boot_fw1=run boot_rd_img;bootm” </p>
<p>nvram set flag_boot_success=1 &amp;&amp; nvram commit &amp;&amp; /etc/init.d/dropbear enable &amp;&amp; /etc/init.d/dropbear start</p>
<p>3.ssh连接路由器，用户名root，密码还是刚才算出来的密码，windows用winscp这个软件连接路由器，将压缩包里的factory固件上传到tmp目录</p>
<p>4.执行下面这条，路由器会自动重启进入op，默认ip 192.168.6.1，用户名root，密码password<br> mtd -r write /tmp/factory.bin firmware</p>
<p> 5.重启后按照自己需求，将ax6s-full.bin或者ax6s-mini.bin作为升级包在op下不保留配置升级，刷入成功</p>
<p>底包只是第一次需要 ，后续升级直接刷sys即可。建议修改无线设置后重启下路由器。</p>
<p><img src="/2023/04/26/Nas/105919usdfvfenvffzzcec.png" alt="img"></p>
<p> 遇到手机app加载速度异常的，可尝试DHCP/DNS的高级设置里，启用禁止解析ipv6<br> 如果有遇到重启或者不稳定的，ssh里运行cat /sys/fs/pstore/* 发出日志。</p>
<p> 下载地址<a target="_blank" rel="noopener" href="https://sssddddff.lanzouo.com/ibIns0me47mf">https://sssddddff.lanzouo.com/ibIns0me47mf</a></p>
<h1 id="openwrt"><a href="#openwrt" class="headerlink" title="openwrt"></a>openwrt</h1><p>1.光猫关了ipv6 ra使能，dhcpv6使能</p>
<p>2.pppoe拨号只拨了wan口，不知道能不能拨wan6</p>
<p>3.默认192.168.6.1</p>
<h3 id="安装socat"><a href="#安装socat" class="headerlink" title="安装socat"></a>安装socat</h3><p><img src="/2023/04/26/Nas/image-20230515005559345.png" alt="image-20230515005559345"></p>
<p>上传ipk文件</p>
<p>ssh连接192.168.6.1</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /tmp/upload/</span><br><span class="line">opkg install luci-app-socat_20200824-5_all.ipk</span><br><span class="line">opkg install luci-i18n-zn-cn-socat_20200824-5_all.ipk</span><br></pre></td></tr></table></figure>





<h3 id="动态dns设置"><a href="#动态dns设置" class="headerlink" title="动态dns设置"></a>动态dns设置</h3><p>主机名：xxx.fun</p>
<p>域名：abc.xxx.fun</p>
<p><img src="/2023/04/26/Nas/image-20230515005836066.png" alt="image-20230515005836066"></p>
<h4 id="一个脚本解决单lan口旁路由ipv6-动态dns不自动更新IP烦恼"><a href="#一个脚本解决单lan口旁路由ipv6-动态dns不自动更新IP烦恼" class="headerlink" title="一个脚本解决单lan口旁路由ipv6 动态dns不自动更新IP烦恼"></a>一个脚本解决单lan口旁路由ipv6 动态dns不自动更新IP烦恼</h4><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/read/cv5294558/">https://www.bilibili.com/read/cv5294558/</a></p>
<p>把ddns重启写成脚本，在openwrt中的计划任务（crontab服务）添加定时执行，设置每隔十分钟执行一次</p>
<p>shell脚本</p>
<p>#!/bin/sh<br>#source/etc/profile<br>/etc/init.d/ddns restart</p>
<p>crontab执行命令</p>
<p>*/10 * * * * /usr/lib/ddns/restart_ddns.sh</p>
<p>shell脚本放在/usr/lib/ddns目录下（其他目录也可以，记得在crontab执行文件里更改目录）</p>
<p>重启crontab服务既可</p>
<p> 作者：进击的王总丶 <a target="_blank" rel="noopener" href="https://www.bilibili.com/read/cv5294558/">https://www.bilibili.com/read/cv5294558/</a> 出处：bilibili</p>
<h3 id="防火墙"><a href="#防火墙" class="headerlink" title="防火墙"></a>防火墙</h3><p>网络-防火墙-端口转发</p>
<p><img src="/2023/04/26/Nas/image-20230515005946194.png" alt="image-20230515005946194"></p>
<p>但是这个感觉没用</p>
<p>防火墙入站，转发打开</p>
<p><img src="/2023/04/26/Nas/image-20230515010025006.png" alt="image-20230515010025006"></p>
<h3 id="socat端口转发"><a href="#socat端口转发" class="headerlink" title="socat端口转发"></a>socat端口转发</h3><p><img src="/2023/04/26/Nas/image-20230515010035429.png" alt="image-20230515010035429"></p>
<h3 id="dns设置"><a href="#dns设置" class="headerlink" title="dns设置"></a>dns设置</h3><p>ssh进去</p>
<p>vi etc/config/dhcp</p>
<p>修改start值</p>
<h3 id="smartDns"><a href="#smartDns" class="headerlink" title="smartDns"></a>smartDns</h3><ul>
<li>dns转发添加127.0.0.0#6053<img src="/2023/04/26/Nas/image-20230516155337346.png" alt="image-20230516155337346"></li>
<li>关闭dnsmasq缓存</li>
</ul>
<p>高级——dns查询缓存的大小——0</p>
<ul>
<li>开启smartdns</li>
</ul>
<p><img src="/2023/04/26/Nas/image-20230516155524130.png" alt="image-20230516155524130"></p>
<p><img src="/2023/04/26/Nas/image-20230516155536850.png" alt="image-20230516155536850"></p>
<ul>
<li>smartdns高级设置</li>
</ul>
<p><img src="/2023/04/26/Nas/image-20230516155708375.png" alt="image-20230516155708375"></p>
<p><strong>回传ttl=10，缓存=10240，没ipv6就不要开双栈优选</strong></p>
<ul>
<li>第二dns服务器</li>
</ul>
<p><img src="/2023/04/26/Nas/image-20230516155724116.png" alt="image-20230516155724116"></p>
<ul>
<li>还可配置局域网代理</li>
</ul>
<h3 id="ap设置"><a href="#ap设置" class="headerlink" title="ap设置"></a>ap设置</h3><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_52027058/article/details/128701905">https://blog.csdn.net/weixin_52027058/article/details/128701905</a></p>
<p>apmac：D4:DA:21:70:3C:C7</p>
<p>2.4G</p>
<p><img src="/2023/04/26/Nas/image-20230519145225511.png" alt="image-20230519145225511"></p>
<p>5G</p>
<p><img src="/2023/04/26/Nas/image-20230519145335968.png" alt="image-20230519145335968"></p>
<p>ap 192.168.2.1</p>
<h3 id="配置mtu"><a href="#配置mtu" class="headerlink" title="配置mtu"></a>配置mtu</h3><p><img src="/2023/04/26/Nas/image-20230519150944418.png" alt="image-20230519150944418"></p>
<h3 id="open下无法用域名访问内网服务"><a href="#open下无法用域名访问内网服务" class="headerlink" title="open下无法用域名访问内网服务"></a>open下无法用域名访问内网服务</h3><p><a target="_blank" rel="noopener" href="https://www.daxiaamu.com/7468/">https://www.daxiaamu.com/7468/</a></p>
<p>只能说openwrt坑太多了，第一次知道开源社区的东西还能这么垃圾。本期遇到的坑是：<br> 当我设置好ddns+端口转发后，通过域名可以在局域网内访问openwrt后台，但是无法用域名访问其他任何设备了。</p>
<p>试了下在外网，是可以用域名访问的。</p>
<p>这个问题查了好久，终于找到了解决方案（来自<a target="_blank" rel="noopener" href="https://www.right.com.cn/forum/forum.php?mod=redirect&goto=findpost&ptid=8192269&pid=16637078">这里</a>）</p>
<p>1.ssh连接openwrt系统后，编辑/etc/sysctl.d/11-br-netfilter.conf文件。<br> net.bridge.bridge-nf-call-arptables=0<br> net.bridge.bridge-nf-call-ip6tables=0<br> net.bridge.bridge-nf-call-iptables=0<br> 确认后面的值是0，如果不是，需要改为0<br> 2.编辑/etc/sysctl.conf文件。文件内容可能是空的，把第一条的内容复制进sysctl.conf文件，保存退出。<br> 3.ssh内输入sysctl -p命令，查看输出结果是不是上面提到的那三行内容。<br> 4.输入/etc/init.d/sysctl restart</p>
<h1 id="alist-tvbox"><a href="#alist-tvbox" class="headerlink" title="alist tvbox"></a>alist tvbox</h1><p><a target="_blank" rel="noopener" href="https://github.com/power721/alist-tvbox">https://github.com/power721/alist-tvbox</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 4567:4567 -p 5344:80 -e ALIST_PORT=5344 -v /etc/xiaoya:/data --restart=always --name=xiaoya-tvbox haroldli/xiaoya-tvbox:latest</span><br></pre></td></tr></table></figure>

<h3 id="文档"><a href="#文档" class="headerlink" title="文档"></a>文档</h3><p><a target="_blank" rel="noopener" href="https://github.com/power721/alist-tvbox/blob/master/doc/README_zh.md">https://github.com/power721/alist-tvbox/blob/master/doc/README_zh.md</a></p>
<h1 id="xiaoya全家桶"><a href="#xiaoya全家桶" class="headerlink" title="xiaoya全家桶"></a>xiaoya全家桶</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">全家桶，开箱即用。</span><br><span class="line"></span><br><span class="line">bash -c &quot;$(curl http://docker.xiaoya.pro/emby_plus.sh)&quot; -s /媒体库目录</span><br><span class="line"></span><br><span class="line">如果配置文件目录不在 /etc/xiaoya，那么要传递第2个参数，指明配置文件目录所在</span><br><span class="line">bash -c &quot;$(curl http://docker.xiaoya.pro/emby_plus.sh)&quot; -s /媒体库目录   /配置文件目录</span><br><span class="line"></span><br><span class="line">Emby的登入账号：</span><br><span class="line">用户名：xiaoya</span><br><span class="line">密码：1234</span><br><span class="line"></span><br><span class="line">步骤：</span><br><span class="line">0. 确保xiaoya升级到了1031版本，同时如果是自己手动配置的容器，那么记得要加上 2345-&gt;2345，2346-&gt;2346 这2个端口映射</span><br><span class="line"></span><br><span class="line">1. 先确保xiaoya正常运行，去xiaoya网页的 /元数据  目录点击一个MP4文件，看看是否正常，这个是所有后续的前提</span><br><span class="line"></span><br><span class="line">2. 选择一个有足够空间的目录（挂载硬盘或U盘都可以，确保有160G空余的空间）</span><br><span class="line"></span><br><span class="line">3. 确保 docker_address.txt 配置正确，指向xiaoya的地址</span><br><span class="line"></span><br><span class="line">4. 执行一键安装全家桶命令</span><br><span class="line"></span><br><span class="line">5. 安装好后，重启xiaoya一次</span><br><span class="line"></span><br><span class="line">6. 通过 xiaoya的2345端口 去连接，尽量用客户端或者三方播放器，不要用网页，因为浏览器解码能力弱，容易出现“不兼容的流”之类错误</span><br><span class="line"></span><br><span class="line">媒体库 test，是用来测试播放器的兼容性，里面一个内置字幕的视频和一个外置字幕，自行修改strm文件里面的地址</span><br></pre></td></tr></table></figure>

<p>修改sh文件的emby为docker pull lovechen/embyserver:latest</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bash -c &quot;$(curl http://docker.xiaoya.pro/emby_plus.sh)&quot; -s /volume1/docker/emby/</span><br><span class="line">bash -c emby.sh -s /volume1/docker/emby/</span><br></pre></td></tr></table></figure>





<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@NAS:/volume1/homes/HQ# ./emby.sh /volume1/docker/emby/</span><br></pre></td></tr></table></figure>



<h1 id="xiaoya"><a href="#xiaoya" class="headerlink" title="xiaoya"></a>xiaoya</h1><h3 id="故障"><a href="#故障" class="headerlink" title="故障"></a>故障</h3><p><img src="/2023/04/26/Nas/image-20231118235848681.png" alt="image-20231118235848681"></p>
<p><img src="/2023/04/26/Nas/image-20231118235753046.png" alt="image-20231118235753046"></p>
<p><a target="_blank" rel="noopener" href="https://xiaoyaliu.notion.site/xiaoya-docker-69404af849504fa5bcf9f2dd5ecaa75f#8647f4096f494a9c89a9bb5295c37a18">https://xiaoyaliu.notion.site/xiaoya-docker-69404af849504fa5bcf9f2dd5ecaa75f#8647f4096f494a9c89a9bb5295c37a18</a></p>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash -c &quot;$(curl http://docker.xiaoya.pro/update_new.sh)&quot; -s host</span><br></pre></td></tr></table></figure>

<h3 id="Host"><a href="#Host" class="headerlink" title="Host"></a>Host</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">搞不清楚怎么配置3个必须文件的用下面的一键安装，一步一步的提示，会检查你输入的参数长度，参数不对，会退出安装，已输入正确的下次安装无需重复输入</span><br><span class="line"></span><br><span class="line">bash -c &quot;$(curl -s http://docker.xiaoya.pro/update_new.sh)&quot;</span><br><span class="line"></span><br><span class="line">host模式安装</span><br><span class="line">bash -c &quot;$(curl -s http://docker.xiaoya.pro/update_new.sh)&quot;  -s host</span><br><span class="line"></span><br><span class="line">二选一</span><br></pre></td></tr></table></figure>





<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=fDdxLJQomi4">https://www.youtube.com/watch?v=fDdxLJQomi4</a></p>
<p>ssh进去nas</p>
<p>bash -c “$(curl http:docker.xiaoya.pro/update_new.sh)”</p>
<p>然后在ui界面看容器有没有跑起来</p>
<p>跑起来之后去5678进入后台</p>
<h3 id="安装host模式，bug可能少点"><a href="#安装host模式，bug可能少点" class="headerlink" title="安装host模式，bug可能少点"></a>安装host模式，bug可能少点</h3><p>port 6789，直接能访问</p>
<h3 id="强制登入"><a href="#强制登入" class="headerlink" title="强制登入"></a>强制登入</h3><p>先转存这个 <a target="_blank" rel="noopener" href="https://www.aliyundrive.com/s/rP9gP3h9asE">https://www.aliyundrive.com/s/rP9gP3h9asE</a>  到自己网盘<strong>（选择资源盘）</strong>，然后浏览器打开转存后的目录，浏览器的url  <a target="_blank" rel="noopener" href="https://www.aliyundrive.com/drive/file/resource/**640xxxxxxxxxxxxxxxxxxxca8a">https://www.aliyundrive.com/drive/file/resource/**640xxxxxxxxxxxxxxxxxxxca8a</a>** 最后一串就是，记得这个目录不要删，里面的内容可以定期删除</p>
<ul>
<li>设置dav密码</li>
<li>建这个文件guestlogin.txt</li>
</ul>
<p><img src="/2023/04/26/Nas/image-20231007234600588.png" alt="image-20231007234600588"></p>
<h3 id="自动清理"><a href="#自动清理" class="headerlink" title="自动清理"></a>自动清理</h3><p>一劳永逸的 小雅 转存 清理 工具（20230801更新：支持新版阿里云。支持TG推送功能，支持自动领取签到奖励功能感谢gavin liu提供的脚本，支持实时清理，支持小雅镜像定时重启和定时更新，支持多个阿里云盘签到功能，建议模式3或模式5）</p>
<p>模式0：每天自动清理一次。如果系统重启需要手动重新运行或把命令加入系统启动。<br>bash -c “$(curl -s <a target="_blank" rel="noopener" href="https://xiaoyahelper.zngle.cf/aliyun_clear.sh">https://xiaoyahelper.zngle.cf/aliyun_clear.sh</a> | tail -n +2)” -s 0 -tg</p>
<p>模式1：一次性清理，一般用于测试效果。<br>bash -c “$(curl -s <a target="_blank" rel="noopener" href="https://xiaoyahelper.zngle.cf/aliyun_clear.sh">https://xiaoyahelper.zngle.cf/aliyun_clear.sh</a> | tail -n +2)” -s 1 -tg</p>
<p>模式2：已废弃，不再支持</p>
<p>模式3：创建一个名为 xiaoyakeeper 的docker定时运行小雅转存清理并升级小雅镜像<br>bash -c “$(curl -s <a target="_blank" rel="noopener" href="https://xiaoyahelper.zngle.cf/aliyun_clear.sh">https://xiaoyahelper.zngle.cf/aliyun_clear.sh</a> | tail -n +2)” -s 3 -tg</p>
<p>模式4：同模式3</p>
<p>模式5：与模式3的区别是实时清理，只要产生了播放缓存一分钟内立即清理。签到和定时升级同模式3<br>bash -c “$(curl -s <a target="_blank" rel="noopener" href="https://xiaoyahelper.zngle.cf/aliyun_clear.sh">https://xiaoyahelper.zngle.cf/aliyun_clear.sh</a> | tail -n +2)” -s 5 -tg</p>
<p>其它模式：也可以把脚本下载下来自己魔改。</p>
<p>签到功能说明：<br>1、执行时机和清理缓存完全相同<br>2、可以手动创建/etc/xiaoya/mycheckintoken.txt，定义多个网盘签到的32位refresh token，每行一个，不添加文件就是默认小雅转存的网盘签到。<br>3、自动刷新/etc/xiaoya/mycheckintoken.txt、/etc/xiaoya/mytoken.txt（可能可以延长refresh token时效，待观察）</p>
<p>关于模式0/3/4/5定时运行的说明：<br>1、默认从运行脚本的下一分钟开始，每天运行一次<br>2、运行的时间也可以通过手动创建/etc/xiaoya/myruntime.txt修改，比如06:00,18:00就是每天早晚6点各运行一次</p>
<p>关于自动升级:<br>1、定时升级的命令保存在/etc/xiaoya/mycmd.txt中，删除该文件变成定时重启小雅<br>2、完成清理和签到后自动执行/etc/xiaoya/mycmd.txt中的命令，该文件中的内容默认升级小雅镜像，可以修改该文件改编脚本的行为，不建议修改。</p>
<p>关于tg推送：<br>所有模式加上-tg功能均可绑定消息推送的TG账号，只有第1次运行需要加-tg参数</p>
<p>问题反馈:联系群里的heiheigui</p>
<h1 id="emby-xiaoya"><a href="#emby-xiaoya" class="headerlink" title="emby+xiaoya"></a>emby+xiaoya</h1><h3 id="媒体库目录需要修改权限"><a href="#媒体库目录需要修改权限" class="headerlink" title="媒体库目录需要修改权限"></a>媒体库目录需要修改权限</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chmod -R 777 目录</span><br><span class="line">chmod -R 777 /volume1/docker/emby-xiaoya/</span><br></pre></td></tr></table></figure>

<h3 id="示例mnt那个路径空间不够，需要把刮削文件保存到volume1里面才行"><a href="#示例mnt那个路径空间不够，需要把刮削文件保存到volume1里面才行" class="headerlink" title="示例mnt那个路径空间不够，需要把刮削文件保存到volume1里面才行"></a>示例mnt那个路径空间不够，需要把刮削文件保存到volume1里面才行</h3><h3 id="可能需要提前安装unzip"><a href="#可能需要提前安装unzip" class="headerlink" title="可能需要提前安装unzip"></a>可能需要提前安装unzip</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">来了，一键安装emby+数据下载/解压/替换</span><br><span class="line">x86官方版</span><br><span class="line">bash -c &quot;$(curl http://docker.xiaoya.pro/emby.sh)&quot; -s /媒体库目录</span><br><span class="line">arm64v8官方版</span><br><span class="line">bash -c &quot;$(curl http://docker.xiaoya.pro/emby_armv8.sh)&quot; -s /媒体库目录</span><br><span class="line">arm32v8官方版</span><br><span class="line">bash -c &quot;$(curl http://docker.xiaoya.pro/emby_armv7.sh)&quot; -s /媒体库目录</span><br><span class="line">lovechen上海解封版</span><br><span class="line">bash -c &quot;$(curl http://docker.xiaoya.pro/emby_lovechen.sh)&quot; -s /媒体库目录</span><br><span class="line">比如：</span><br><span class="line">bash -c &quot;$(curl http://docker.xiaoya.pro/emby.sh)&quot; -s /mnt/sata-1/emby</span><br><span class="line">bash -c &quot;$(curl http://docker.xiaoya.pro/emby_arm.sh)&quot; -s /mnt/sata-1/emby</span><br><span class="line"></span><br><span class="line">如果你的 docker_address.txt 不在 /etc/xiaoya 目录下，那么添加第二个参数</span><br><span class="line"></span><br><span class="line">bash -c &quot;$(curl http://docker.xiaoya.pro/emby.sh)&quot; -s /媒体库目录   /xiaoya配置目录</span><br><span class="line">比如：</span><br><span class="line">bash -c &quot;$(curl http://docker.xiaoya.pro/emby.sh)&quot; -s /mnt/sata-1/emby  /share/Docker/xiaoya</span><br><span class="line"></span><br><span class="line">下载，解压，替换过程要看你网速和机器性能，总体时间在30分钟-2小时，要耐心，执行完毕后，打开 http://xxxx:8096，选择 “+ 新媒体库”，然后选择添加 “文件夹 +”，选择 /media 下的路径，分次导入</span><br></pre></td></tr></table></figure>



<p>run</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mkdir /volume1/docker/emby/</span><br><span class="line"></span><br><span class="line">chmod -R 777 /volume1/docker/emby/</span><br><span class="line"></span><br><span class="line">bash -c &quot;$(curl http://docker.xiaoya.pro/emby.sh)&quot; -s /volume1/docker/emby</span><br></pre></td></tr></table></figure>



<h3 id="302直链"><a href="#302直链" class="headerlink" title="302直链"></a>302直链</h3><p><a target="_blank" rel="noopener" href="https://syq.pub/archives/27/">https://syq.pub/archives/27/</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/MisakaFxxk/Go_stream">https://github.com/MisakaFxxk/Go_stream</a></p>
<h1 id="alist"><a href="#alist" class="headerlink" title="alist"></a>alist</h1><p>矿神直接安装</p>
<p>进去后先设置用户名密码</p>
<p>参考官方文档<a target="_blank" rel="noopener" href="https://alist.nn.ci/">https://alist.nn.ci/</a></p>
<h2 id="webdav"><a href="#webdav" class="headerlink" title="webdav"></a>webdav</h2><p>端口号5244</p>
<p>文件路径/dav</p>
<p>用户名密码用alist</p>
<p><strong>重点：先挂载到nas，再webdav到终端</strong></p>
<p>挂载nas：</p>
<p>二、群辉挂载alist到本地</p>
<p>1.启动file station,点击工具，选择远程连接，连接设置，选择webdav,主机名填写群辉IP，端口为5244，路径为dav,填写alist的账号和密码，配置文件名称也填写为群辉IP，其他默认即可。最后点击完成。</p>
<p><img src="/2023/04/26/Nas/v2-66b57a82076eee1e56999d59c23e6af2_r.jpg" alt="img"></p>
<p><img src="/2023/04/26/Nas/v2-846ffd86c230783e3b1cea77eb5eee36_r.jpg" alt="img"></p>
<p><img src="/2023/04/26/Nas/v2-c27ffe602ea9176538be6450caa5530f_r.jpg" alt="img"></p>
<p><img src="/2023/04/26/Nas/v2-b58b90e593ac5e3d815f241e53cc8dd3_r.jpg" alt="img"></p>
<p>三、infuse添加群辉中挂载的alist网盘（我以手机演示，ATV设置也基本一致）码字不易，麻烦点赞 </p>
<p>1.打开infuse,选择设置，选择新增文件来源，选择添加共享，选择添加webdav共享，名称自己设置，通讯协议选择webdav,位置选择群辉IP，用户名和密码填写alist的，点击高级，路径为/dav,端口为5244，其他默认，接下来可以好好享受了。</p>
<p><img src="/2023/04/26/Nas/v2-138419b38830c7a229475ec5e7b3cf58_r.jpg" alt="img"></p>
<p><img src="/2023/04/26/Nas/v2-7e78e51fcbc664e34c130adf004d687b_r.jpg" alt="img"></p>
<p><img src="/2023/04/26/Nas/v2-157d5f172b41ecf982db0358ff20d021_r.jpg" alt="img"></p>
<p>参考：<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/602028646">https://zhuanlan.zhihu.com/p/602028646</a></p>
<p>一、群辉添加矿神社区安装alist套件，alist挂载天翼网盘</p>
<p>1.打开群辉套件中心</p>
<p>2.在设置中新增套件来源</p>
<p>3.添加<a href="https://link.zhihu.com/?target=https://spk7.imnks.com/">矿神群晖SPK套件源DSM7.x by IMNKS.COM</a>输入如图链接</p>
<p><img src="/2023/04/26/Nas/v2-0fa6eb5c0ad20d3c4087e57df13eb55e_r.jpg" alt="img"></p>
<p>4.搜索alist套件安装</p>
<p><img src="/2023/04/26/Nas/v2-4c77e868a4048708621e9a1ff2a9ab9c_r.jpg" alt="img"></p>
<p>5.打开alist主页，会显示未挂载网盘，不用管，点下面的管理</p>
<p><img src="/2023/04/26/Nas/v2-a8d5bf973e4c5cc71958b49a922553a1_r.jpg" alt="img"></p>
<p>6.修改alist用户名和密码</p>
<p><img src="/2023/04/26/Nas/v2-8786eb7699e6ee48a5643bad38bee3f3_r.jpg" alt="img"></p>
<p>7.点击存储，再点击添加网盘，驱动选择阿里云盘，挂载路径填/什么（自己取名），WebDAV 策略选本地代理即可，提取到最前，接下来填写刷新令牌和根文件夹ID，这个根据官网文档进行配置，<a href="https://link.zhihu.com/?target=https://alist.nn.ci/zh/guide/">https://alist.nn.ci/zh/guide/</a>，在使用指南选择左侧目录添加存储，选择阿里云盘，根文件夹ID，打开阿里云盘官网，点击进入要设置的文件夹时点击 URL 后面的字符串，如<a href="https://link.zhihu.com/?target=https://www.aliyundrive.com/drive/folder/5fe01e1830601baf774e4827a9fb8fb2b5bf7940">https://www.aliyundrive.com/drive/folder/5fe01e1830601baf774e4827a9fb8fb2b5bf7940open in new window</a>，这个文件夹的 file_id 即为 <code>5fe01e1830601baf774e4827a9fb8fb2b5bf7940</code>；接下来登录手机阿里云盘扫二维码获取token,填入刷新令牌中即可。</p>
<p><img src="/2023/04/26/Nas/v2-e562031a2de84739290d2eb191d0682e_r.jpg" alt="img"></p>
<p>二、群辉挂载alist到本地</p>
<p>1.启动file station,点击工具，选择远程连接，连接设置，选择webdav,主机名填写群辉IP，端口为5244，路径为dav,填写alist的账号和密码，配置文件名称也填写为群辉IP，其他默认即可。最后点击完成。</p>
<p><img src="/2023/04/26/Nas/v2-66b57a82076eee1e56999d59c23e6af2_r.jpg" alt="img"></p>
<p><img src="/2023/04/26/Nas/v2-846ffd86c230783e3b1cea77eb5eee36_r.jpg" alt="img"></p>
<p><img src="/2023/04/26/Nas/v2-c27ffe602ea9176538be6450caa5530f_r.jpg" alt="img"></p>
<p><img src="/2023/04/26/Nas/v2-b58b90e593ac5e3d815f241e53cc8dd3_r.jpg" alt="img"></p>
<p>三、infuse添加群辉中挂载的alist网盘（我以手机演示，ATV设置也基本一致）码字不易，麻烦点赞 </p>
<p>1.打开infuse,选择设置，选择新增文件来源，选择添加共享，选择添加webdav共享，名称自己设置，通讯协议选择webdav,位置选择群辉IP，用户名和密码填写alist的，点击高级，路径为/dav,端口为5244，其他默认，接下来可以好好享受了。</p>
<p><img src="/2023/04/26/Nas/v2-138419b38830c7a229475ec5e7b3cf58_r.jpg" alt="img"></p>
<p><img src="/2023/04/26/Nas/v2-7e78e51fcbc664e34c130adf004d687b_r.jpg" alt="img"></p>
<p><img src="/2023/04/26/Nas/v2-157d5f172b41ecf982db0358ff20d021_r.jpg" alt="img"></p>
<h1 id="alist-tvbox-1"><a href="#alist-tvbox-1" class="headerlink" title="alist-tvbox"></a>alist-tvbox</h1><h1 id="jellyfin挂载webdav"><a href="#jellyfin挂载webdav" class="headerlink" title="jellyfin挂载webdav"></a>jellyfin挂载webdav</h1><h3 id="clouddrive"><a href="#clouddrive" class="headerlink" title="clouddrive"></a>clouddrive</h3><h3 id="挂载jellyfin"><a href="#挂载jellyfin" class="headerlink" title="挂载jellyfin"></a>挂载jellyfin</h3><h1 id="音乐"><a href="#音乐" class="headerlink" title="音乐"></a>音乐</h1><p>洛雪音乐+六音音源</p>
<p><a target="_blank" rel="noopener" href="https://www.izywang.com/323.html">https://www.izywang.com/323.html</a></p>
<p>六音下载链接<a target="_blank" rel="noopener" href="https://www.izywang.com/download.php?id=MzIz">https://www.izywang.com/download.php?id=MzIz</a></p>
<p>洛雪下载链接<a target="_blank" rel="noopener" href="https://github.com/lyswhut/lx-music-desktop#readme">https://github.com/lyswhut/lx-music-desktop#readme</a></p>
<p>导入播放列表</p>
<p>分享qq音乐播放列表，复制进洛雪-左侧歌单-打开歌单</p>
<p><img src="/2023/04/26/Nas/image-20231003214228016.png" alt="image-20231003214228016"></p>
<p>下载设置好文件夹</p>
<p>可以直接下载到nas上</p>
<h1 id="群晖安装ipkg"><a href="#群晖安装ipkg" class="headerlink" title="群晖安装ipkg"></a>群晖安装ipkg</h1><p><a target="_blank" rel="noopener" href="https://www.yellowei.com/wei-huang/171/">https://www.yellowei.com/wei-huang/171/</a></p>
<h3 id="安装ipkg"><a href="#安装ipkg" class="headerlink" title="安装ipkg"></a>安装ipkg</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo -i</span><br><span class="line">wget http://ipkg.nslu2-linux.org/feeds/optware/syno-i686/cross/unstable/syno-i686-bootstrap_1.2-7_i686.xsh</span><br><span class="line"><span class="built_in">chmod</span> +x syno-i686-bootstrap_1.2-7_i686.xsh</span><br><span class="line">sh syno-i686-bootstrap_1.2-7_i686.xsh</span><br><span class="line">ipkg update</span><br></pre></td></tr></table></figure>

<p>Bash</p>
<h3 id="测试ipkg，安装unzip"><a href="#测试ipkg，安装unzip" class="headerlink" title="测试ipkg，安装unzip"></a>测试ipkg，安装unzip</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ipkg install unzip</span><br></pre></td></tr></table></figure>






          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://developer-hq.github.io/2023/04/24/%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2023/04/24/%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B/" itemprop="url">大语言模型</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2023-04-24T17:28:14+08:00">
                2023-04-24
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>gpt4</p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1vM4y1U7b5/?spm_id_from=333.337.search-card.all.click&amp;vd_source=3d040baeb67aeceb2bba9c7169a67a96">https://www.bilibili.com/video/BV1vM4y1U7b5/?spm_id_from=333.337.search-card.all.click&amp;vd_source=3d040baeb67aeceb2bba9c7169a67a96</a></p>
<h1 id="三个月时间做175B的模型"><a href="#三个月时间做175B的模型" class="headerlink" title="三个月时间做175B的模型"></a>三个月时间做175B的模型</h1><p>干货多</p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1XT411v7c9/?share_source=copy_web&amp;vd_source=29489718d77abc8aa57a22525c511957">https://www.bilibili.com/video/BV1XT411v7c9/?share_source=copy_web&amp;vd_source=29489718d77abc8aa57a22525c511957</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/">&lt;i class&#x3D;&quot;fa fa-angle-left&quot;&gt;&lt;&#x2F;i&gt;</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/4/">&lt;i class&#x3D;&quot;fa fa-angle-right&quot;&gt;&lt;&#x2F;i&gt;</a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name"></p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/">
    
              
                  <span class="site-state-item-count">84</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            

            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">John Doe</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
